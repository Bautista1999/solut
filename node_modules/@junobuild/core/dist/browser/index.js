import{a as Bn,b as uo,c as or,d as Nn,e as we,f as lo,g as ar,h as ho,i as ot,j as Ke,k as Pn,l as Me,m as po,n as Cn,o as Xt,p as Fn,q as ae,r as kn,s as sr,t as fr,u as jn}from"./chunk-BLAF376Q.js";var Jn=or(lr=>{"use strict";lr.byteLength=mo;lr.toByteArray=go;lr.fromByteArray=vo;var qt=[],Ot=[],yo=typeof Uint8Array<"u"?Uint8Array:Array,Hr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(se=0,zn=Hr.length;se<zn;++se)qt[se]=Hr[se],Ot[Hr.charCodeAt(se)]=se;var se,zn;Ot["-".charCodeAt(0)]=62;Ot["_".charCodeAt(0)]=63;function Gn(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");r===-1&&(r=t);var i=r===t?0:4-r%4;return[r,i]}function mo(e){var t=Gn(e),r=t[0],i=t[1];return(r+i)*3/4-i}function wo(e,t,r){return(t+r)*3/4-r}function go(e){var t,r=Gn(e),i=r[0],a=r[1],u=new yo(wo(e,i,a)),d=0,m=a>0?i-4:i,w;for(w=0;w<m;w+=4)t=Ot[e.charCodeAt(w)]<<18|Ot[e.charCodeAt(w+1)]<<12|Ot[e.charCodeAt(w+2)]<<6|Ot[e.charCodeAt(w+3)],u[d++]=t>>16&255,u[d++]=t>>8&255,u[d++]=t&255;return a===2&&(t=Ot[e.charCodeAt(w)]<<2|Ot[e.charCodeAt(w+1)]>>4,u[d++]=t&255),a===1&&(t=Ot[e.charCodeAt(w)]<<10|Ot[e.charCodeAt(w+1)]<<4|Ot[e.charCodeAt(w+2)]>>2,u[d++]=t>>8&255,u[d++]=t&255),u}function _o(e){return qt[e>>18&63]+qt[e>>12&63]+qt[e>>6&63]+qt[e&63]}function bo(e,t,r){for(var i,a=[],u=t;u<r;u+=3)i=(e[u]<<16&16711680)+(e[u+1]<<8&65280)+(e[u+2]&255),a.push(_o(i));return a.join("")}function vo(e){for(var t,r=e.length,i=r%3,a=[],u=16383,d=0,m=r-i;d<m;d+=u)a.push(bo(e,d,d+u>m?m:d+u));return i===1?(t=e[r-1],a.push(qt[t>>2]+qt[t<<4&63]+"==")):i===2&&(t=(e[r-2]<<8)+e[r-1],a.push(qt[t>>10]+qt[t>>4&63]+qt[t<<2&63]+"=")),a.join("")}});var ai=or(Ee=>{"use strict";var $r=Jn(),ve=ho(),In=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Ee.Buffer=g;Ee.SlowBuffer=Uo;Ee.INSPECT_MAX_BYTES=50;var dr=2147483647;Ee.kMaxLength=dr;g.TYPED_ARRAY_SUPPORT=Eo();!g.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function Eo(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),e.foo()===42}catch{return!1}}Object.defineProperty(g.prototype,"parent",{enumerable:!0,get:function(){if(g.isBuffer(this))return this.buffer}});Object.defineProperty(g.prototype,"offset",{enumerable:!0,get:function(){if(g.isBuffer(this))return this.byteOffset}});function Zt(e){if(e>dr)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,g.prototype),t}function g(e,t,r){if(typeof e=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Jr(e)}return Qn(e,t,r)}g.poolSize=8192;function Qn(e,t,r){if(typeof e=="string")return To(e,t);if(ArrayBuffer.isView(e))return So(e);if(e==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Ht(e,ArrayBuffer)||e&&Ht(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ht(e,SharedArrayBuffer)||e&&Ht(e.buffer,SharedArrayBuffer)))return zr(e,t,r);if(typeof e=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var i=e.valueOf&&e.valueOf();if(i!=null&&i!==e)return g.from(i,t,r);var a=Oo(e);if(a)return a;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]=="function")return g.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}g.from=function(e,t,r){return Qn(e,t,r)};Object.setPrototypeOf(g.prototype,Uint8Array.prototype);Object.setPrototypeOf(g,Uint8Array);function Dn(e){if(typeof e!="number")throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function Ao(e,t,r){return Dn(e),e<=0?Zt(e):t!==void 0?typeof r=="string"?Zt(e).fill(t,r):Zt(e).fill(t):Zt(e)}g.alloc=function(e,t,r){return Ao(e,t,r)};function Jr(e){return Dn(e),Zt(e<0?0:Ir(e)|0)}g.allocUnsafe=function(e){return Jr(e)};g.allocUnsafeSlow=function(e){return Jr(e)};function To(e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!g.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var r=Ln(e,t)|0,i=Zt(r),a=i.write(e,t);return a!==r&&(i=i.slice(0,a)),i}function Wr(e){for(var t=e.length<0?0:Ir(e.length)|0,r=Zt(t),i=0;i<t;i+=1)r[i]=e[i]&255;return r}function So(e){if(Ht(e,Uint8Array)){var t=new Uint8Array(e);return zr(t.buffer,t.byteOffset,t.byteLength)}return Wr(e)}function zr(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');var i;return t===void 0&&r===void 0?i=new Uint8Array(e):r===void 0?i=new Uint8Array(e,t):i=new Uint8Array(e,t,r),Object.setPrototypeOf(i,g.prototype),i}function Oo(e){if(g.isBuffer(e)){var t=Ir(e.length)|0,r=Zt(t);return r.length===0||e.copy(r,0,0,t),r}if(e.length!==void 0)return typeof e.length!="number"||Xr(e.length)?Zt(0):Wr(e);if(e.type==="Buffer"&&Array.isArray(e.data))return Wr(e.data)}function Ir(e){if(e>=dr)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+dr.toString(16)+" bytes");return e|0}function Uo(e){return+e!=e&&(e=0),g.alloc(+e)}g.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==g.prototype};g.compare=function(t,r){if(Ht(t,Uint8Array)&&(t=g.from(t,t.offset,t.byteLength)),Ht(r,Uint8Array)&&(r=g.from(r,r.offset,r.byteLength)),!g.isBuffer(t)||!g.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===r)return 0;for(var i=t.length,a=r.length,u=0,d=Math.min(i,a);u<d;++u)if(t[u]!==r[u]){i=t[u],a=r[u];break}return i<a?-1:a<i?1:0};g.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};g.concat=function(t,r){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return g.alloc(0);var i;if(r===void 0)for(r=0,i=0;i<t.length;++i)r+=t[i].length;var a=g.allocUnsafe(r),u=0;for(i=0;i<t.length;++i){var d=t[i];if(Ht(d,Uint8Array))u+d.length>a.length?g.from(d).copy(a,u):Uint8Array.prototype.set.call(a,d,u);else if(g.isBuffer(d))d.copy(a,u);else throw new TypeError('"list" argument must be an Array of Buffers');u+=d.length}return a};function Ln(e,t){if(g.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Ht(e,ArrayBuffer))return e.byteLength;if(typeof e!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,i=arguments.length>2&&arguments[2]===!0;if(!i&&r===0)return 0;for(var a=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return Gr(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return oi(e).length;default:if(a)return i?-1:Gr(e).length;t=(""+t).toLowerCase(),a=!0}}g.byteLength=Ln;function Ro(e,t,r){var i=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,t>>>=0,r<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":return Vo(this,t,r);case"utf8":case"utf-8":return ei(this,t,r);case"ascii":return Ko(this,t,r);case"latin1":case"binary":return Mo(this,t,r);case"base64":return ko(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Yo(this,t,r);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}g.prototype._isBuffer=!0;function fe(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}g.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)fe(this,r,r+1);return this};g.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)fe(this,r,r+3),fe(this,r+1,r+2);return this};g.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)fe(this,r,r+7),fe(this,r+1,r+6),fe(this,r+2,r+5),fe(this,r+3,r+4);return this};g.prototype.toString=function(){var t=this.length;return t===0?"":arguments.length===0?ei(this,0,t):Ro.apply(this,arguments)};g.prototype.toLocaleString=g.prototype.toString;g.prototype.equals=function(t){if(!g.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:g.compare(this,t)===0};g.prototype.inspect=function(){var t="",r=Ee.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"};In&&(g.prototype[In]=g.prototype.inspect);g.prototype.compare=function(t,r,i,a,u){if(Ht(t,Uint8Array)&&(t=g.from(t,t.offset,t.byteLength)),!g.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(r===void 0&&(r=0),i===void 0&&(i=t?t.length:0),a===void 0&&(a=0),u===void 0&&(u=this.length),r<0||i>t.length||a<0||u>this.length)throw new RangeError("out of range index");if(a>=u&&r>=i)return 0;if(a>=u)return-1;if(r>=i)return 1;if(r>>>=0,i>>>=0,a>>>=0,u>>>=0,this===t)return 0;for(var d=u-a,m=i-r,w=Math.min(d,m),A=this.slice(a,u),P=t.slice(r,i),O=0;O<w;++O)if(A[O]!==P[O]){d=A[O],m=P[O];break}return d<m?-1:m<d?1:0};function ti(e,t,r,i,a){if(e.length===0)return-1;if(typeof r=="string"?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,Xr(r)&&(r=a?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(a)return-1;r=e.length-1}else if(r<0)if(a)r=0;else return-1;if(typeof t=="string"&&(t=g.from(t,i)),g.isBuffer(t))return t.length===0?-1:Xn(e,t,r,i,a);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?a?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):Xn(e,[t],r,i,a);throw new TypeError("val must be string, number or Buffer")}function Xn(e,t,r,i,a){var u=1,d=e.length,m=t.length;if(i!==void 0&&(i=String(i).toLowerCase(),i==="ucs2"||i==="ucs-2"||i==="utf16le"||i==="utf-16le")){if(e.length<2||t.length<2)return-1;u=2,d/=2,m/=2,r/=2}function w(it,st){return u===1?it[st]:it.readUInt16BE(st*u)}var A;if(a){var P=-1;for(A=r;A<d;A++)if(w(e,A)===w(t,P===-1?0:A-P)){if(P===-1&&(P=A),A-P+1===m)return P*u}else P!==-1&&(A-=A-P),P=-1}else for(r+m>d&&(r=d-m),A=r;A>=0;A--){for(var O=!0,Z=0;Z<m;Z++)if(w(e,A+Z)!==w(t,Z)){O=!1;break}if(O)return A}return-1}g.prototype.includes=function(t,r,i){return this.indexOf(t,r,i)!==-1};g.prototype.indexOf=function(t,r,i){return ti(this,t,r,i,!0)};g.prototype.lastIndexOf=function(t,r,i){return ti(this,t,r,i,!1)};function Bo(e,t,r,i){r=Number(r)||0;var a=e.length-r;i?(i=Number(i),i>a&&(i=a)):i=a;var u=t.length;i>u/2&&(i=u/2);for(var d=0;d<i;++d){var m=parseInt(t.substr(d*2,2),16);if(Xr(m))return d;e[r+d]=m}return d}function No(e,t,r,i){return hr(Gr(t,e.length-r),e,r,i)}function Po(e,t,r,i){return hr($o(t),e,r,i)}function Co(e,t,r,i){return hr(oi(t),e,r,i)}function Fo(e,t,r,i){return hr(Wo(t,e.length-r),e,r,i)}g.prototype.write=function(t,r,i,a){if(r===void 0)a="utf8",i=this.length,r=0;else if(i===void 0&&typeof r=="string")a=r,i=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(i)?(i=i>>>0,a===void 0&&(a="utf8")):(a=i,i=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var u=this.length-r;if((i===void 0||i>u)&&(i=u),t.length>0&&(i<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");a||(a="utf8");for(var d=!1;;)switch(a){case"hex":return Bo(this,t,r,i);case"utf8":case"utf-8":return No(this,t,r,i);case"ascii":case"latin1":case"binary":return Po(this,t,r,i);case"base64":return Co(this,t,r,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Fo(this,t,r,i);default:if(d)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase(),d=!0}};g.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ko(e,t,r){return t===0&&r===e.length?$r.fromByteArray(e):$r.fromByteArray(e.slice(t,r))}function ei(e,t,r){r=Math.min(e.length,r);for(var i=[],a=t;a<r;){var u=e[a],d=null,m=u>239?4:u>223?3:u>191?2:1;if(a+m<=r){var w,A,P,O;switch(m){case 1:u<128&&(d=u);break;case 2:w=e[a+1],(w&192)===128&&(O=(u&31)<<6|w&63,O>127&&(d=O));break;case 3:w=e[a+1],A=e[a+2],(w&192)===128&&(A&192)===128&&(O=(u&15)<<12|(w&63)<<6|A&63,O>2047&&(O<55296||O>57343)&&(d=O));break;case 4:w=e[a+1],A=e[a+2],P=e[a+3],(w&192)===128&&(A&192)===128&&(P&192)===128&&(O=(u&15)<<18|(w&63)<<12|(A&63)<<6|P&63,O>65535&&O<1114112&&(d=O))}}d===null?(d=65533,m=1):d>65535&&(d-=65536,i.push(d>>>10&1023|55296),d=56320|d&1023),i.push(d),a+=m}return jo(i)}var Zn=4096;function jo(e){var t=e.length;if(t<=Zn)return String.fromCharCode.apply(String,e);for(var r="",i=0;i<t;)r+=String.fromCharCode.apply(String,e.slice(i,i+=Zn));return r}function Ko(e,t,r){var i="";r=Math.min(e.length,r);for(var a=t;a<r;++a)i+=String.fromCharCode(e[a]&127);return i}function Mo(e,t,r){var i="";r=Math.min(e.length,r);for(var a=t;a<r;++a)i+=String.fromCharCode(e[a]);return i}function Vo(e,t,r){var i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);for(var a="",u=t;u<r;++u)a+=zo[e[u]];return a}function Yo(e,t,r){for(var i=e.slice(t,r),a="",u=0;u<i.length-1;u+=2)a+=String.fromCharCode(i[u]+i[u+1]*256);return a}g.prototype.slice=function(t,r){var i=this.length;t=~~t,r=r===void 0?i:~~r,t<0?(t+=i,t<0&&(t=0)):t>i&&(t=i),r<0?(r+=i,r<0&&(r=0)):r>i&&(r=i),r<t&&(r=t);var a=this.subarray(t,r);return Object.setPrototypeOf(a,g.prototype),a};function pt(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}g.prototype.readUintLE=g.prototype.readUIntLE=function(t,r,i){t=t>>>0,r=r>>>0,i||pt(t,r,this.length);for(var a=this[t],u=1,d=0;++d<r&&(u*=256);)a+=this[t+d]*u;return a};g.prototype.readUintBE=g.prototype.readUIntBE=function(t,r,i){t=t>>>0,r=r>>>0,i||pt(t,r,this.length);for(var a=this[t+--r],u=1;r>0&&(u*=256);)a+=this[t+--r]*u;return a};g.prototype.readUint8=g.prototype.readUInt8=function(t,r){return t=t>>>0,r||pt(t,1,this.length),this[t]};g.prototype.readUint16LE=g.prototype.readUInt16LE=function(t,r){return t=t>>>0,r||pt(t,2,this.length),this[t]|this[t+1]<<8};g.prototype.readUint16BE=g.prototype.readUInt16BE=function(t,r){return t=t>>>0,r||pt(t,2,this.length),this[t]<<8|this[t+1]};g.prototype.readUint32LE=g.prototype.readUInt32LE=function(t,r){return t=t>>>0,r||pt(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};g.prototype.readUint32BE=g.prototype.readUInt32BE=function(t,r){return t=t>>>0,r||pt(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};g.prototype.readIntLE=function(t,r,i){t=t>>>0,r=r>>>0,i||pt(t,r,this.length);for(var a=this[t],u=1,d=0;++d<r&&(u*=256);)a+=this[t+d]*u;return u*=128,a>=u&&(a-=Math.pow(2,8*r)),a};g.prototype.readIntBE=function(t,r,i){t=t>>>0,r=r>>>0,i||pt(t,r,this.length);for(var a=r,u=1,d=this[t+--a];a>0&&(u*=256);)d+=this[t+--a]*u;return u*=128,d>=u&&(d-=Math.pow(2,8*r)),d};g.prototype.readInt8=function(t,r){return t=t>>>0,r||pt(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};g.prototype.readInt16LE=function(t,r){t=t>>>0,r||pt(t,2,this.length);var i=this[t]|this[t+1]<<8;return i&32768?i|4294901760:i};g.prototype.readInt16BE=function(t,r){t=t>>>0,r||pt(t,2,this.length);var i=this[t+1]|this[t]<<8;return i&32768?i|4294901760:i};g.prototype.readInt32LE=function(t,r){return t=t>>>0,r||pt(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};g.prototype.readInt32BE=function(t,r){return t=t>>>0,r||pt(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};g.prototype.readFloatLE=function(t,r){return t=t>>>0,r||pt(t,4,this.length),ve.read(this,t,!0,23,4)};g.prototype.readFloatBE=function(t,r){return t=t>>>0,r||pt(t,4,this.length),ve.read(this,t,!1,23,4)};g.prototype.readDoubleLE=function(t,r){return t=t>>>0,r||pt(t,8,this.length),ve.read(this,t,!0,52,8)};g.prototype.readDoubleBE=function(t,r){return t=t>>>0,r||pt(t,8,this.length),ve.read(this,t,!1,52,8)};function vt(e,t,r,i,a,u){if(!g.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<u)throw new RangeError('"value" argument is out of bounds');if(r+i>e.length)throw new RangeError("Index out of range")}g.prototype.writeUintLE=g.prototype.writeUIntLE=function(t,r,i,a){if(t=+t,r=r>>>0,i=i>>>0,!a){var u=Math.pow(2,8*i)-1;vt(this,t,r,i,u,0)}var d=1,m=0;for(this[r]=t&255;++m<i&&(d*=256);)this[r+m]=t/d&255;return r+i};g.prototype.writeUintBE=g.prototype.writeUIntBE=function(t,r,i,a){if(t=+t,r=r>>>0,i=i>>>0,!a){var u=Math.pow(2,8*i)-1;vt(this,t,r,i,u,0)}var d=i-1,m=1;for(this[r+d]=t&255;--d>=0&&(m*=256);)this[r+d]=t/m&255;return r+i};g.prototype.writeUint8=g.prototype.writeUInt8=function(t,r,i){return t=+t,r=r>>>0,i||vt(this,t,r,1,255,0),this[r]=t&255,r+1};g.prototype.writeUint16LE=g.prototype.writeUInt16LE=function(t,r,i){return t=+t,r=r>>>0,i||vt(this,t,r,2,65535,0),this[r]=t&255,this[r+1]=t>>>8,r+2};g.prototype.writeUint16BE=g.prototype.writeUInt16BE=function(t,r,i){return t=+t,r=r>>>0,i||vt(this,t,r,2,65535,0),this[r]=t>>>8,this[r+1]=t&255,r+2};g.prototype.writeUint32LE=g.prototype.writeUInt32LE=function(t,r,i){return t=+t,r=r>>>0,i||vt(this,t,r,4,4294967295,0),this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=t&255,r+4};g.prototype.writeUint32BE=g.prototype.writeUInt32BE=function(t,r,i){return t=+t,r=r>>>0,i||vt(this,t,r,4,4294967295,0),this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255,r+4};g.prototype.writeIntLE=function(t,r,i,a){if(t=+t,r=r>>>0,!a){var u=Math.pow(2,8*i-1);vt(this,t,r,i,u-1,-u)}var d=0,m=1,w=0;for(this[r]=t&255;++d<i&&(m*=256);)t<0&&w===0&&this[r+d-1]!==0&&(w=1),this[r+d]=(t/m>>0)-w&255;return r+i};g.prototype.writeIntBE=function(t,r,i,a){if(t=+t,r=r>>>0,!a){var u=Math.pow(2,8*i-1);vt(this,t,r,i,u-1,-u)}var d=i-1,m=1,w=0;for(this[r+d]=t&255;--d>=0&&(m*=256);)t<0&&w===0&&this[r+d+1]!==0&&(w=1),this[r+d]=(t/m>>0)-w&255;return r+i};g.prototype.writeInt8=function(t,r,i){return t=+t,r=r>>>0,i||vt(this,t,r,1,127,-128),t<0&&(t=255+t+1),this[r]=t&255,r+1};g.prototype.writeInt16LE=function(t,r,i){return t=+t,r=r>>>0,i||vt(this,t,r,2,32767,-32768),this[r]=t&255,this[r+1]=t>>>8,r+2};g.prototype.writeInt16BE=function(t,r,i){return t=+t,r=r>>>0,i||vt(this,t,r,2,32767,-32768),this[r]=t>>>8,this[r+1]=t&255,r+2};g.prototype.writeInt32LE=function(t,r,i){return t=+t,r=r>>>0,i||vt(this,t,r,4,2147483647,-2147483648),this[r]=t&255,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24,r+4};g.prototype.writeInt32BE=function(t,r,i){return t=+t,r=r>>>0,i||vt(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255,r+4};function ri(e,t,r,i,a,u){if(r+i>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function ni(e,t,r,i,a){return t=+t,r=r>>>0,a||ri(e,t,r,4,34028234663852886e22,-34028234663852886e22),ve.write(e,t,r,i,23,4),r+4}g.prototype.writeFloatLE=function(t,r,i){return ni(this,t,r,!0,i)};g.prototype.writeFloatBE=function(t,r,i){return ni(this,t,r,!1,i)};function ii(e,t,r,i,a){return t=+t,r=r>>>0,a||ri(e,t,r,8,17976931348623157e292,-17976931348623157e292),ve.write(e,t,r,i,52,8),r+8}g.prototype.writeDoubleLE=function(t,r,i){return ii(this,t,r,!0,i)};g.prototype.writeDoubleBE=function(t,r,i){return ii(this,t,r,!1,i)};g.prototype.copy=function(t,r,i,a){if(!g.isBuffer(t))throw new TypeError("argument should be a Buffer");if(i||(i=0),!a&&a!==0&&(a=this.length),r>=t.length&&(r=t.length),r||(r=0),a>0&&a<i&&(a=i),a===i||t.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(a<0)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length),t.length-r<a-i&&(a=t.length-r+i);var u=a-i;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,i,a):Uint8Array.prototype.set.call(t,this.subarray(i,a),r),u};g.prototype.fill=function(t,r,i,a){if(typeof t=="string"){if(typeof r=="string"?(a=r,r=0,i=this.length):typeof i=="string"&&(a=i,i=this.length),a!==void 0&&typeof a!="string")throw new TypeError("encoding must be a string");if(typeof a=="string"&&!g.isEncoding(a))throw new TypeError("Unknown encoding: "+a);if(t.length===1){var u=t.charCodeAt(0);(a==="utf8"&&u<128||a==="latin1")&&(t=u)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(r<0||this.length<r||this.length<i)throw new RangeError("Out of range index");if(i<=r)return this;r=r>>>0,i=i===void 0?this.length:i>>>0,t||(t=0);var d;if(typeof t=="number")for(d=r;d<i;++d)this[d]=t;else{var m=g.isBuffer(t)?t:g.from(t,a),w=m.length;if(w===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(d=0;d<i-r;++d)this[d+r]=m[d%w]}return this};var qo=/[^+/0-9A-Za-z-_]/g;function Ho(e){if(e=e.split("=")[0],e=e.trim().replace(qo,""),e.length<2)return"";for(;e.length%4!==0;)e=e+"=";return e}function Gr(e,t){t=t||1/0;for(var r,i=e.length,a=null,u=[],d=0;d<i;++d){if(r=e.charCodeAt(d),r>55295&&r<57344){if(!a){if(r>56319){(t-=3)>-1&&u.push(239,191,189);continue}else if(d+1===i){(t-=3)>-1&&u.push(239,191,189);continue}a=r;continue}if(r<56320){(t-=3)>-1&&u.push(239,191,189),a=r;continue}r=(a-55296<<10|r-56320)+65536}else a&&(t-=3)>-1&&u.push(239,191,189);if(a=null,r<128){if((t-=1)<0)break;u.push(r)}else if(r<2048){if((t-=2)<0)break;u.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;u.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;u.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return u}function $o(e){for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r)&255);return t}function Wo(e,t){for(var r,i,a,u=[],d=0;d<e.length&&!((t-=2)<0);++d)r=e.charCodeAt(d),i=r>>8,a=r%256,u.push(a),u.push(i);return u}function oi(e){return $r.toByteArray(Ho(e))}function hr(e,t,r,i){for(var a=0;a<i&&!(a+r>=t.length||a>=e.length);++a)t[a+r]=e[a];return a}function Ht(e,t){return e instanceof t||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===t.name}function Xr(e){return e!==e}var zo=function(){for(var e="0123456789abcdef",t=new Array(256),r=0;r<16;++r)for(var i=r*16,a=0;a<16;++a)t[i+a]=e[r]+e[a];return t}()});var bi={};Nn(bi,{default:()=>la});var la,vi=uo(()=>{la={}});var Ei=or((wf,gr)=>{var le=(vi(),lo(bi));if(le&&le.default){gr.exports=le.default;for(let e in le)gr.exports[e]=le[e]}else le&&(gr.exports=le)});var en=or((gf,_r)=>{(function(e){"use strict";var t=function(o){var f,s=new Float64Array(16);if(o)for(f=0;f<o.length;f++)s[f]=o[f];return s},r=function(){throw new Error("no PRNG")},i=new Uint8Array(16),a=new Uint8Array(32);a[0]=9;var u=t(),d=t([1]),m=t([56129,1]),w=t([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),A=t([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),P=t([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),O=t([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),Z=t([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function it(o,f,s,n){o[f]=s>>24&255,o[f+1]=s>>16&255,o[f+2]=s>>8&255,o[f+3]=s&255,o[f+4]=n>>24&255,o[f+5]=n>>16&255,o[f+6]=n>>8&255,o[f+7]=n&255}function st(o,f,s,n,c){var h,p=0;for(h=0;h<c;h++)p|=o[f+h]^s[n+h];return(1&p-1>>>8)-1}function xt(o,f,s,n){return st(o,f,s,n,16)}function Tt(o,f,s,n){return st(o,f,s,n,32)}function dt(o,f,s,n){for(var c=n[0]&255|(n[1]&255)<<8|(n[2]&255)<<16|(n[3]&255)<<24,h=s[0]&255|(s[1]&255)<<8|(s[2]&255)<<16|(s[3]&255)<<24,p=s[4]&255|(s[5]&255)<<8|(s[6]&255)<<16|(s[7]&255)<<24,b=s[8]&255|(s[9]&255)<<8|(s[10]&255)<<16|(s[11]&255)<<24,S=s[12]&255|(s[13]&255)<<8|(s[14]&255)<<16|(s[15]&255)<<24,j=n[4]&255|(n[5]&255)<<8|(n[6]&255)<<16|(n[7]&255)<<24,R=f[0]&255|(f[1]&255)<<8|(f[2]&255)<<16|(f[3]&255)<<24,et=f[4]&255|(f[5]&255)<<8|(f[6]&255)<<16|(f[7]&255)<<24,N=f[8]&255|(f[9]&255)<<8|(f[10]&255)<<16|(f[11]&255)<<24,V=f[12]&255|(f[13]&255)<<8|(f[14]&255)<<16|(f[15]&255)<<24,Y=n[8]&255|(n[9]&255)<<8|(n[10]&255)<<16|(n[11]&255)<<24,z=s[16]&255|(s[17]&255)<<8|(s[18]&255)<<16|(s[19]&255)<<24,W=s[20]&255|(s[21]&255)<<8|(s[22]&255)<<16|(s[23]&255)<<24,q=s[24]&255|(s[25]&255)<<8|(s[26]&255)<<16|(s[27]&255)<<24,$=s[28]&255|(s[29]&255)<<8|(s[30]&255)<<16|(s[31]&255)<<24,H=n[12]&255|(n[13]&255)<<8|(n[14]&255)<<16|(n[15]&255)<<24,C=c,K=h,B=p,F=b,k=S,U=j,x=R,y=et,E=N,_=V,v=Y,T=z,M=W,G=q,I=$,J=H,l,Q=0;Q<20;Q+=2)l=C+M|0,k^=l<<7|l>>>32-7,l=k+C|0,E^=l<<9|l>>>32-9,l=E+k|0,M^=l<<13|l>>>32-13,l=M+E|0,C^=l<<18|l>>>32-18,l=U+K|0,_^=l<<7|l>>>32-7,l=_+U|0,G^=l<<9|l>>>32-9,l=G+_|0,K^=l<<13|l>>>32-13,l=K+G|0,U^=l<<18|l>>>32-18,l=v+x|0,I^=l<<7|l>>>32-7,l=I+v|0,B^=l<<9|l>>>32-9,l=B+I|0,x^=l<<13|l>>>32-13,l=x+B|0,v^=l<<18|l>>>32-18,l=J+T|0,F^=l<<7|l>>>32-7,l=F+J|0,y^=l<<9|l>>>32-9,l=y+F|0,T^=l<<13|l>>>32-13,l=T+y|0,J^=l<<18|l>>>32-18,l=C+F|0,K^=l<<7|l>>>32-7,l=K+C|0,B^=l<<9|l>>>32-9,l=B+K|0,F^=l<<13|l>>>32-13,l=F+B|0,C^=l<<18|l>>>32-18,l=U+k|0,x^=l<<7|l>>>32-7,l=x+U|0,y^=l<<9|l>>>32-9,l=y+x|0,k^=l<<13|l>>>32-13,l=k+y|0,U^=l<<18|l>>>32-18,l=v+_|0,T^=l<<7|l>>>32-7,l=T+v|0,E^=l<<9|l>>>32-9,l=E+T|0,_^=l<<13|l>>>32-13,l=_+E|0,v^=l<<18|l>>>32-18,l=J+I|0,M^=l<<7|l>>>32-7,l=M+J|0,G^=l<<9|l>>>32-9,l=G+M|0,I^=l<<13|l>>>32-13,l=I+G|0,J^=l<<18|l>>>32-18;C=C+c|0,K=K+h|0,B=B+p|0,F=F+b|0,k=k+S|0,U=U+j|0,x=x+R|0,y=y+et|0,E=E+N|0,_=_+V|0,v=v+Y|0,T=T+z|0,M=M+W|0,G=G+q|0,I=I+$|0,J=J+H|0,o[0]=C>>>0&255,o[1]=C>>>8&255,o[2]=C>>>16&255,o[3]=C>>>24&255,o[4]=K>>>0&255,o[5]=K>>>8&255,o[6]=K>>>16&255,o[7]=K>>>24&255,o[8]=B>>>0&255,o[9]=B>>>8&255,o[10]=B>>>16&255,o[11]=B>>>24&255,o[12]=F>>>0&255,o[13]=F>>>8&255,o[14]=F>>>16&255,o[15]=F>>>24&255,o[16]=k>>>0&255,o[17]=k>>>8&255,o[18]=k>>>16&255,o[19]=k>>>24&255,o[20]=U>>>0&255,o[21]=U>>>8&255,o[22]=U>>>16&255,o[23]=U>>>24&255,o[24]=x>>>0&255,o[25]=x>>>8&255,o[26]=x>>>16&255,o[27]=x>>>24&255,o[28]=y>>>0&255,o[29]=y>>>8&255,o[30]=y>>>16&255,o[31]=y>>>24&255,o[32]=E>>>0&255,o[33]=E>>>8&255,o[34]=E>>>16&255,o[35]=E>>>24&255,o[36]=_>>>0&255,o[37]=_>>>8&255,o[38]=_>>>16&255,o[39]=_>>>24&255,o[40]=v>>>0&255,o[41]=v>>>8&255,o[42]=v>>>16&255,o[43]=v>>>24&255,o[44]=T>>>0&255,o[45]=T>>>8&255,o[46]=T>>>16&255,o[47]=T>>>24&255,o[48]=M>>>0&255,o[49]=M>>>8&255,o[50]=M>>>16&255,o[51]=M>>>24&255,o[52]=G>>>0&255,o[53]=G>>>8&255,o[54]=G>>>16&255,o[55]=G>>>24&255,o[56]=I>>>0&255,o[57]=I>>>8&255,o[58]=I>>>16&255,o[59]=I>>>24&255,o[60]=J>>>0&255,o[61]=J>>>8&255,o[62]=J>>>16&255,o[63]=J>>>24&255}function Bt(o,f,s,n){for(var c=n[0]&255|(n[1]&255)<<8|(n[2]&255)<<16|(n[3]&255)<<24,h=s[0]&255|(s[1]&255)<<8|(s[2]&255)<<16|(s[3]&255)<<24,p=s[4]&255|(s[5]&255)<<8|(s[6]&255)<<16|(s[7]&255)<<24,b=s[8]&255|(s[9]&255)<<8|(s[10]&255)<<16|(s[11]&255)<<24,S=s[12]&255|(s[13]&255)<<8|(s[14]&255)<<16|(s[15]&255)<<24,j=n[4]&255|(n[5]&255)<<8|(n[6]&255)<<16|(n[7]&255)<<24,R=f[0]&255|(f[1]&255)<<8|(f[2]&255)<<16|(f[3]&255)<<24,et=f[4]&255|(f[5]&255)<<8|(f[6]&255)<<16|(f[7]&255)<<24,N=f[8]&255|(f[9]&255)<<8|(f[10]&255)<<16|(f[11]&255)<<24,V=f[12]&255|(f[13]&255)<<8|(f[14]&255)<<16|(f[15]&255)<<24,Y=n[8]&255|(n[9]&255)<<8|(n[10]&255)<<16|(n[11]&255)<<24,z=s[16]&255|(s[17]&255)<<8|(s[18]&255)<<16|(s[19]&255)<<24,W=s[20]&255|(s[21]&255)<<8|(s[22]&255)<<16|(s[23]&255)<<24,q=s[24]&255|(s[25]&255)<<8|(s[26]&255)<<16|(s[27]&255)<<24,$=s[28]&255|(s[29]&255)<<8|(s[30]&255)<<16|(s[31]&255)<<24,H=n[12]&255|(n[13]&255)<<8|(n[14]&255)<<16|(n[15]&255)<<24,C=c,K=h,B=p,F=b,k=S,U=j,x=R,y=et,E=N,_=V,v=Y,T=z,M=W,G=q,I=$,J=H,l,Q=0;Q<20;Q+=2)l=C+M|0,k^=l<<7|l>>>32-7,l=k+C|0,E^=l<<9|l>>>32-9,l=E+k|0,M^=l<<13|l>>>32-13,l=M+E|0,C^=l<<18|l>>>32-18,l=U+K|0,_^=l<<7|l>>>32-7,l=_+U|0,G^=l<<9|l>>>32-9,l=G+_|0,K^=l<<13|l>>>32-13,l=K+G|0,U^=l<<18|l>>>32-18,l=v+x|0,I^=l<<7|l>>>32-7,l=I+v|0,B^=l<<9|l>>>32-9,l=B+I|0,x^=l<<13|l>>>32-13,l=x+B|0,v^=l<<18|l>>>32-18,l=J+T|0,F^=l<<7|l>>>32-7,l=F+J|0,y^=l<<9|l>>>32-9,l=y+F|0,T^=l<<13|l>>>32-13,l=T+y|0,J^=l<<18|l>>>32-18,l=C+F|0,K^=l<<7|l>>>32-7,l=K+C|0,B^=l<<9|l>>>32-9,l=B+K|0,F^=l<<13|l>>>32-13,l=F+B|0,C^=l<<18|l>>>32-18,l=U+k|0,x^=l<<7|l>>>32-7,l=x+U|0,y^=l<<9|l>>>32-9,l=y+x|0,k^=l<<13|l>>>32-13,l=k+y|0,U^=l<<18|l>>>32-18,l=v+_|0,T^=l<<7|l>>>32-7,l=T+v|0,E^=l<<9|l>>>32-9,l=E+T|0,_^=l<<13|l>>>32-13,l=_+E|0,v^=l<<18|l>>>32-18,l=J+I|0,M^=l<<7|l>>>32-7,l=M+J|0,G^=l<<9|l>>>32-9,l=G+M|0,I^=l<<13|l>>>32-13,l=I+G|0,J^=l<<18|l>>>32-18;o[0]=C>>>0&255,o[1]=C>>>8&255,o[2]=C>>>16&255,o[3]=C>>>24&255,o[4]=U>>>0&255,o[5]=U>>>8&255,o[6]=U>>>16&255,o[7]=U>>>24&255,o[8]=v>>>0&255,o[9]=v>>>8&255,o[10]=v>>>16&255,o[11]=v>>>24&255,o[12]=J>>>0&255,o[13]=J>>>8&255,o[14]=J>>>16&255,o[15]=J>>>24&255,o[16]=x>>>0&255,o[17]=x>>>8&255,o[18]=x>>>16&255,o[19]=x>>>24&255,o[20]=y>>>0&255,o[21]=y>>>8&255,o[22]=y>>>16&255,o[23]=y>>>24&255,o[24]=E>>>0&255,o[25]=E>>>8&255,o[26]=E>>>16&255,o[27]=E>>>24&255,o[28]=_>>>0&255,o[29]=_>>>8&255,o[30]=_>>>16&255,o[31]=_>>>24&255}function Mt(o,f,s,n){dt(o,f,s,n)}function Nt(o,f,s,n){Bt(o,f,s,n)}var Vt=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function Je(o,f,s,n,c,h,p){var b=new Uint8Array(16),S=new Uint8Array(64),j,R;for(R=0;R<16;R++)b[R]=0;for(R=0;R<8;R++)b[R]=h[R];for(;c>=64;){for(Mt(S,b,p,Vt),R=0;R<64;R++)o[f+R]=s[n+R]^S[R];for(j=1,R=8;R<16;R++)j=j+(b[R]&255)|0,b[R]=j&255,j>>>=8;c-=64,f+=64,n+=64}if(c>0)for(Mt(S,b,p,Vt),R=0;R<c;R++)o[f+R]=s[n+R]^S[R];return 0}function Ie(o,f,s,n,c){var h=new Uint8Array(16),p=new Uint8Array(64),b,S;for(S=0;S<16;S++)h[S]=0;for(S=0;S<8;S++)h[S]=n[S];for(;s>=64;){for(Mt(p,h,c,Vt),S=0;S<64;S++)o[f+S]=p[S];for(b=1,S=8;S<16;S++)b=b+(h[S]&255)|0,h[S]=b&255,b>>>=8;s-=64,f+=64}if(s>0)for(Mt(p,h,c,Vt),S=0;S<s;S++)o[f+S]=p[S];return 0}function Xe(o,f,s,n,c){var h=new Uint8Array(32);Nt(h,n,c,Vt);for(var p=new Uint8Array(8),b=0;b<8;b++)p[b]=n[b+16];return Ie(o,f,s,p,h)}function Ue(o,f,s,n,c,h,p){var b=new Uint8Array(32);Nt(b,h,p,Vt);for(var S=new Uint8Array(8),j=0;j<8;j++)S[j]=h[j+16];return Je(o,f,s,n,c,S,b)}var xe=function(o){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var f,s,n,c,h,p,b,S;f=o[0]&255|(o[1]&255)<<8,this.r[0]=f&8191,s=o[2]&255|(o[3]&255)<<8,this.r[1]=(f>>>13|s<<3)&8191,n=o[4]&255|(o[5]&255)<<8,this.r[2]=(s>>>10|n<<6)&7939,c=o[6]&255|(o[7]&255)<<8,this.r[3]=(n>>>7|c<<9)&8191,h=o[8]&255|(o[9]&255)<<8,this.r[4]=(c>>>4|h<<12)&255,this.r[5]=h>>>1&8190,p=o[10]&255|(o[11]&255)<<8,this.r[6]=(h>>>14|p<<2)&8191,b=o[12]&255|(o[13]&255)<<8,this.r[7]=(p>>>11|b<<5)&8065,S=o[14]&255|(o[15]&255)<<8,this.r[8]=(b>>>8|S<<8)&8191,this.r[9]=S>>>5&127,this.pad[0]=o[16]&255|(o[17]&255)<<8,this.pad[1]=o[18]&255|(o[19]&255)<<8,this.pad[2]=o[20]&255|(o[21]&255)<<8,this.pad[3]=o[22]&255|(o[23]&255)<<8,this.pad[4]=o[24]&255|(o[25]&255)<<8,this.pad[5]=o[26]&255|(o[27]&255)<<8,this.pad[6]=o[28]&255|(o[29]&255)<<8,this.pad[7]=o[30]&255|(o[31]&255)<<8};xe.prototype.blocks=function(o,f,s){for(var n=this.fin?0:2048,c,h,p,b,S,j,R,et,N,V,Y,z,W,q,$,H,C,K,B,F=this.h[0],k=this.h[1],U=this.h[2],x=this.h[3],y=this.h[4],E=this.h[5],_=this.h[6],v=this.h[7],T=this.h[8],M=this.h[9],G=this.r[0],I=this.r[1],J=this.r[2],l=this.r[3],Q=this.r[4],rt=this.r[5],nt=this.r[6],X=this.r[7],L=this.r[8],tt=this.r[9];s>=16;)c=o[f+0]&255|(o[f+1]&255)<<8,F+=c&8191,h=o[f+2]&255|(o[f+3]&255)<<8,k+=(c>>>13|h<<3)&8191,p=o[f+4]&255|(o[f+5]&255)<<8,U+=(h>>>10|p<<6)&8191,b=o[f+6]&255|(o[f+7]&255)<<8,x+=(p>>>7|b<<9)&8191,S=o[f+8]&255|(o[f+9]&255)<<8,y+=(b>>>4|S<<12)&8191,E+=S>>>1&8191,j=o[f+10]&255|(o[f+11]&255)<<8,_+=(S>>>14|j<<2)&8191,R=o[f+12]&255|(o[f+13]&255)<<8,v+=(j>>>11|R<<5)&8191,et=o[f+14]&255|(o[f+15]&255)<<8,T+=(R>>>8|et<<8)&8191,M+=et>>>5|n,N=0,V=N,V+=F*G,V+=k*(5*tt),V+=U*(5*L),V+=x*(5*X),V+=y*(5*nt),N=V>>>13,V&=8191,V+=E*(5*rt),V+=_*(5*Q),V+=v*(5*l),V+=T*(5*J),V+=M*(5*I),N+=V>>>13,V&=8191,Y=N,Y+=F*I,Y+=k*G,Y+=U*(5*tt),Y+=x*(5*L),Y+=y*(5*X),N=Y>>>13,Y&=8191,Y+=E*(5*nt),Y+=_*(5*rt),Y+=v*(5*Q),Y+=T*(5*l),Y+=M*(5*J),N+=Y>>>13,Y&=8191,z=N,z+=F*J,z+=k*I,z+=U*G,z+=x*(5*tt),z+=y*(5*L),N=z>>>13,z&=8191,z+=E*(5*X),z+=_*(5*nt),z+=v*(5*rt),z+=T*(5*Q),z+=M*(5*l),N+=z>>>13,z&=8191,W=N,W+=F*l,W+=k*J,W+=U*I,W+=x*G,W+=y*(5*tt),N=W>>>13,W&=8191,W+=E*(5*L),W+=_*(5*X),W+=v*(5*nt),W+=T*(5*rt),W+=M*(5*Q),N+=W>>>13,W&=8191,q=N,q+=F*Q,q+=k*l,q+=U*J,q+=x*I,q+=y*G,N=q>>>13,q&=8191,q+=E*(5*tt),q+=_*(5*L),q+=v*(5*X),q+=T*(5*nt),q+=M*(5*rt),N+=q>>>13,q&=8191,$=N,$+=F*rt,$+=k*Q,$+=U*l,$+=x*J,$+=y*I,N=$>>>13,$&=8191,$+=E*G,$+=_*(5*tt),$+=v*(5*L),$+=T*(5*X),$+=M*(5*nt),N+=$>>>13,$&=8191,H=N,H+=F*nt,H+=k*rt,H+=U*Q,H+=x*l,H+=y*J,N=H>>>13,H&=8191,H+=E*I,H+=_*G,H+=v*(5*tt),H+=T*(5*L),H+=M*(5*X),N+=H>>>13,H&=8191,C=N,C+=F*X,C+=k*nt,C+=U*rt,C+=x*Q,C+=y*l,N=C>>>13,C&=8191,C+=E*J,C+=_*I,C+=v*G,C+=T*(5*tt),C+=M*(5*L),N+=C>>>13,C&=8191,K=N,K+=F*L,K+=k*X,K+=U*nt,K+=x*rt,K+=y*Q,N=K>>>13,K&=8191,K+=E*l,K+=_*J,K+=v*I,K+=T*G,K+=M*(5*tt),N+=K>>>13,K&=8191,B=N,B+=F*tt,B+=k*L,B+=U*X,B+=x*nt,B+=y*rt,N=B>>>13,B&=8191,B+=E*Q,B+=_*l,B+=v*J,B+=T*I,B+=M*G,N+=B>>>13,B&=8191,N=(N<<2)+N|0,N=N+V|0,V=N&8191,N=N>>>13,Y+=N,F=V,k=Y,U=z,x=W,y=q,E=$,_=H,v=C,T=K,M=B,f+=16,s-=16;this.h[0]=F,this.h[1]=k,this.h[2]=U,this.h[3]=x,this.h[4]=y,this.h[5]=E,this.h[6]=_,this.h[7]=v,this.h[8]=T,this.h[9]=M},xe.prototype.finish=function(o,f){var s=new Uint16Array(10),n,c,h,p;if(this.leftover){for(p=this.leftover,this.buffer[p++]=1;p<16;p++)this.buffer[p]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(n=this.h[1]>>>13,this.h[1]&=8191,p=2;p<10;p++)this.h[p]+=n,n=this.h[p]>>>13,this.h[p]&=8191;for(this.h[0]+=n*5,n=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=n,n=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=n,s[0]=this.h[0]+5,n=s[0]>>>13,s[0]&=8191,p=1;p<10;p++)s[p]=this.h[p]+n,n=s[p]>>>13,s[p]&=8191;for(s[9]-=8192,c=(n^1)-1,p=0;p<10;p++)s[p]&=c;for(c=~c,p=0;p<10;p++)this.h[p]=this.h[p]&c|s[p];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,h=this.h[0]+this.pad[0],this.h[0]=h&65535,p=1;p<8;p++)h=(this.h[p]+this.pad[p]|0)+(h>>>16)|0,this.h[p]=h&65535;o[f+0]=this.h[0]>>>0&255,o[f+1]=this.h[0]>>>8&255,o[f+2]=this.h[1]>>>0&255,o[f+3]=this.h[1]>>>8&255,o[f+4]=this.h[2]>>>0&255,o[f+5]=this.h[2]>>>8&255,o[f+6]=this.h[3]>>>0&255,o[f+7]=this.h[3]>>>8&255,o[f+8]=this.h[4]>>>0&255,o[f+9]=this.h[4]>>>8&255,o[f+10]=this.h[5]>>>0&255,o[f+11]=this.h[5]>>>8&255,o[f+12]=this.h[6]>>>0&255,o[f+13]=this.h[6]>>>8&255,o[f+14]=this.h[7]>>>0&255,o[f+15]=this.h[7]>>>8&255},xe.prototype.update=function(o,f,s){var n,c;if(this.leftover){for(c=16-this.leftover,c>s&&(c=s),n=0;n<c;n++)this.buffer[this.leftover+n]=o[f+n];if(s-=c,f+=c,this.leftover+=c,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(s>=16&&(c=s-s%16,this.blocks(o,f,c),f+=c,s-=c),s){for(n=0;n<s;n++)this.buffer[this.leftover+n]=o[f+n];this.leftover+=s}};function Re(o,f,s,n,c,h){var p=new xe(h);return p.update(s,n,c),p.finish(o,f),0}function ne(o,f,s,n,c,h){var p=new Uint8Array(16);return Re(p,0,s,n,c,h),xt(o,f,p,0)}function Be(o,f,s,n,c){var h;if(s<32)return-1;for(Ue(o,0,f,0,s,n,c),Re(o,16,o,32,s-32,o),h=0;h<16;h++)o[h]=0;return 0}function Ne(o,f,s,n,c){var h,p=new Uint8Array(32);if(s<32||(Xe(p,0,32,n,c),ne(f,16,f,32,s-32,p)!==0))return-1;for(Ue(o,0,f,0,s,n,c),h=0;h<32;h++)o[h]=0;return 0}function Pt(o,f){var s;for(s=0;s<16;s++)o[s]=f[s]|0}function Pe(o){var f,s,n=1;for(f=0;f<16;f++)s=o[f]+n+65535,n=Math.floor(s/65536),o[f]=s-n*65536;o[0]+=n-1+37*(n-1)}function ee(o,f,s){for(var n,c=~(s-1),h=0;h<16;h++)n=c&(o[h]^f[h]),o[h]^=n,f[h]^=n}function re(o,f){var s,n,c,h=t(),p=t();for(s=0;s<16;s++)p[s]=f[s];for(Pe(p),Pe(p),Pe(p),n=0;n<2;n++){for(h[0]=p[0]-65517,s=1;s<15;s++)h[s]=p[s]-65535-(h[s-1]>>16&1),h[s-1]&=65535;h[15]=p[15]-32767-(h[14]>>16&1),c=h[15]>>16&1,h[14]&=65535,ee(p,h,1-c)}for(s=0;s<16;s++)o[2*s]=p[s]&255,o[2*s+1]=p[s]>>8}function Ze(o,f){var s=new Uint8Array(32),n=new Uint8Array(32);return re(s,o),re(n,f),Tt(s,0,n,0)}function wn(o){var f=new Uint8Array(32);return re(f,o),f[0]&1}function Rr(o,f){var s;for(s=0;s<16;s++)o[s]=f[2*s]+(f[2*s+1]<<8);o[15]&=32767}function Ct(o,f,s){for(var n=0;n<16;n++)o[n]=f[n]+s[n]}function Ft(o,f,s){for(var n=0;n<16;n++)o[n]=f[n]-s[n]}function D(o,f,s){var n,c,h=0,p=0,b=0,S=0,j=0,R=0,et=0,N=0,V=0,Y=0,z=0,W=0,q=0,$=0,H=0,C=0,K=0,B=0,F=0,k=0,U=0,x=0,y=0,E=0,_=0,v=0,T=0,M=0,G=0,I=0,J=0,l=s[0],Q=s[1],rt=s[2],nt=s[3],X=s[4],L=s[5],tt=s[6],lt=s[7],at=s[8],ft=s[9],ct=s[10],ut=s[11],ht=s[12],wt=s[13],gt=s[14],_t=s[15];n=f[0],h+=n*l,p+=n*Q,b+=n*rt,S+=n*nt,j+=n*X,R+=n*L,et+=n*tt,N+=n*lt,V+=n*at,Y+=n*ft,z+=n*ct,W+=n*ut,q+=n*ht,$+=n*wt,H+=n*gt,C+=n*_t,n=f[1],p+=n*l,b+=n*Q,S+=n*rt,j+=n*nt,R+=n*X,et+=n*L,N+=n*tt,V+=n*lt,Y+=n*at,z+=n*ft,W+=n*ct,q+=n*ut,$+=n*ht,H+=n*wt,C+=n*gt,K+=n*_t,n=f[2],b+=n*l,S+=n*Q,j+=n*rt,R+=n*nt,et+=n*X,N+=n*L,V+=n*tt,Y+=n*lt,z+=n*at,W+=n*ft,q+=n*ct,$+=n*ut,H+=n*ht,C+=n*wt,K+=n*gt,B+=n*_t,n=f[3],S+=n*l,j+=n*Q,R+=n*rt,et+=n*nt,N+=n*X,V+=n*L,Y+=n*tt,z+=n*lt,W+=n*at,q+=n*ft,$+=n*ct,H+=n*ut,C+=n*ht,K+=n*wt,B+=n*gt,F+=n*_t,n=f[4],j+=n*l,R+=n*Q,et+=n*rt,N+=n*nt,V+=n*X,Y+=n*L,z+=n*tt,W+=n*lt,q+=n*at,$+=n*ft,H+=n*ct,C+=n*ut,K+=n*ht,B+=n*wt,F+=n*gt,k+=n*_t,n=f[5],R+=n*l,et+=n*Q,N+=n*rt,V+=n*nt,Y+=n*X,z+=n*L,W+=n*tt,q+=n*lt,$+=n*at,H+=n*ft,C+=n*ct,K+=n*ut,B+=n*ht,F+=n*wt,k+=n*gt,U+=n*_t,n=f[6],et+=n*l,N+=n*Q,V+=n*rt,Y+=n*nt,z+=n*X,W+=n*L,q+=n*tt,$+=n*lt,H+=n*at,C+=n*ft,K+=n*ct,B+=n*ut,F+=n*ht,k+=n*wt,U+=n*gt,x+=n*_t,n=f[7],N+=n*l,V+=n*Q,Y+=n*rt,z+=n*nt,W+=n*X,q+=n*L,$+=n*tt,H+=n*lt,C+=n*at,K+=n*ft,B+=n*ct,F+=n*ut,k+=n*ht,U+=n*wt,x+=n*gt,y+=n*_t,n=f[8],V+=n*l,Y+=n*Q,z+=n*rt,W+=n*nt,q+=n*X,$+=n*L,H+=n*tt,C+=n*lt,K+=n*at,B+=n*ft,F+=n*ct,k+=n*ut,U+=n*ht,x+=n*wt,y+=n*gt,E+=n*_t,n=f[9],Y+=n*l,z+=n*Q,W+=n*rt,q+=n*nt,$+=n*X,H+=n*L,C+=n*tt,K+=n*lt,B+=n*at,F+=n*ft,k+=n*ct,U+=n*ut,x+=n*ht,y+=n*wt,E+=n*gt,_+=n*_t,n=f[10],z+=n*l,W+=n*Q,q+=n*rt,$+=n*nt,H+=n*X,C+=n*L,K+=n*tt,B+=n*lt,F+=n*at,k+=n*ft,U+=n*ct,x+=n*ut,y+=n*ht,E+=n*wt,_+=n*gt,v+=n*_t,n=f[11],W+=n*l,q+=n*Q,$+=n*rt,H+=n*nt,C+=n*X,K+=n*L,B+=n*tt,F+=n*lt,k+=n*at,U+=n*ft,x+=n*ct,y+=n*ut,E+=n*ht,_+=n*wt,v+=n*gt,T+=n*_t,n=f[12],q+=n*l,$+=n*Q,H+=n*rt,C+=n*nt,K+=n*X,B+=n*L,F+=n*tt,k+=n*lt,U+=n*at,x+=n*ft,y+=n*ct,E+=n*ut,_+=n*ht,v+=n*wt,T+=n*gt,M+=n*_t,n=f[13],$+=n*l,H+=n*Q,C+=n*rt,K+=n*nt,B+=n*X,F+=n*L,k+=n*tt,U+=n*lt,x+=n*at,y+=n*ft,E+=n*ct,_+=n*ut,v+=n*ht,T+=n*wt,M+=n*gt,G+=n*_t,n=f[14],H+=n*l,C+=n*Q,K+=n*rt,B+=n*nt,F+=n*X,k+=n*L,U+=n*tt,x+=n*lt,y+=n*at,E+=n*ft,_+=n*ct,v+=n*ut,T+=n*ht,M+=n*wt,G+=n*gt,I+=n*_t,n=f[15],C+=n*l,K+=n*Q,B+=n*rt,F+=n*nt,k+=n*X,U+=n*L,x+=n*tt,y+=n*lt,E+=n*at,_+=n*ft,v+=n*ct,T+=n*ut,M+=n*ht,G+=n*wt,I+=n*gt,J+=n*_t,h+=38*K,p+=38*B,b+=38*F,S+=38*k,j+=38*U,R+=38*x,et+=38*y,N+=38*E,V+=38*_,Y+=38*v,z+=38*T,W+=38*M,q+=38*G,$+=38*I,H+=38*J,c=1,n=h+c+65535,c=Math.floor(n/65536),h=n-c*65536,n=p+c+65535,c=Math.floor(n/65536),p=n-c*65536,n=b+c+65535,c=Math.floor(n/65536),b=n-c*65536,n=S+c+65535,c=Math.floor(n/65536),S=n-c*65536,n=j+c+65535,c=Math.floor(n/65536),j=n-c*65536,n=R+c+65535,c=Math.floor(n/65536),R=n-c*65536,n=et+c+65535,c=Math.floor(n/65536),et=n-c*65536,n=N+c+65535,c=Math.floor(n/65536),N=n-c*65536,n=V+c+65535,c=Math.floor(n/65536),V=n-c*65536,n=Y+c+65535,c=Math.floor(n/65536),Y=n-c*65536,n=z+c+65535,c=Math.floor(n/65536),z=n-c*65536,n=W+c+65535,c=Math.floor(n/65536),W=n-c*65536,n=q+c+65535,c=Math.floor(n/65536),q=n-c*65536,n=$+c+65535,c=Math.floor(n/65536),$=n-c*65536,n=H+c+65535,c=Math.floor(n/65536),H=n-c*65536,n=C+c+65535,c=Math.floor(n/65536),C=n-c*65536,h+=c-1+37*(c-1),c=1,n=h+c+65535,c=Math.floor(n/65536),h=n-c*65536,n=p+c+65535,c=Math.floor(n/65536),p=n-c*65536,n=b+c+65535,c=Math.floor(n/65536),b=n-c*65536,n=S+c+65535,c=Math.floor(n/65536),S=n-c*65536,n=j+c+65535,c=Math.floor(n/65536),j=n-c*65536,n=R+c+65535,c=Math.floor(n/65536),R=n-c*65536,n=et+c+65535,c=Math.floor(n/65536),et=n-c*65536,n=N+c+65535,c=Math.floor(n/65536),N=n-c*65536,n=V+c+65535,c=Math.floor(n/65536),V=n-c*65536,n=Y+c+65535,c=Math.floor(n/65536),Y=n-c*65536,n=z+c+65535,c=Math.floor(n/65536),z=n-c*65536,n=W+c+65535,c=Math.floor(n/65536),W=n-c*65536,n=q+c+65535,c=Math.floor(n/65536),q=n-c*65536,n=$+c+65535,c=Math.floor(n/65536),$=n-c*65536,n=H+c+65535,c=Math.floor(n/65536),H=n-c*65536,n=C+c+65535,c=Math.floor(n/65536),C=n-c*65536,h+=c-1+37*(c-1),o[0]=h,o[1]=p,o[2]=b,o[3]=S,o[4]=j,o[5]=R,o[6]=et,o[7]=N,o[8]=V,o[9]=Y,o[10]=z,o[11]=W,o[12]=q,o[13]=$,o[14]=H,o[15]=C}function St(o,f){D(o,f,f)}function gn(o,f){var s=t(),n;for(n=0;n<16;n++)s[n]=f[n];for(n=253;n>=0;n--)St(s,s),n!==2&&n!==4&&D(s,s,f);for(n=0;n<16;n++)o[n]=s[n]}function _n(o,f){var s=t(),n;for(n=0;n<16;n++)s[n]=f[n];for(n=250;n>=0;n--)St(s,s),n!==1&&D(s,s,f);for(n=0;n<16;n++)o[n]=s[n]}function Qe(o,f,s){var n=new Uint8Array(32),c=new Float64Array(80),h,p,b=t(),S=t(),j=t(),R=t(),et=t(),N=t();for(p=0;p<31;p++)n[p]=f[p];for(n[31]=f[31]&127|64,n[0]&=248,Rr(c,s),p=0;p<16;p++)S[p]=c[p],R[p]=b[p]=j[p]=0;for(b[0]=R[0]=1,p=254;p>=0;--p)h=n[p>>>3]>>>(p&7)&1,ee(b,S,h),ee(j,R,h),Ct(et,b,j),Ft(b,b,j),Ct(j,S,R),Ft(S,S,R),St(R,et),St(N,b),D(b,j,b),D(j,S,et),Ct(et,b,j),Ft(b,b,j),St(S,b),Ft(j,R,N),D(b,j,m),Ct(b,b,R),D(j,j,b),D(b,R,N),D(R,S,c),St(S,et),ee(b,S,h),ee(j,R,h);for(p=0;p<16;p++)c[p+16]=b[p],c[p+32]=j[p],c[p+48]=S[p],c[p+64]=R[p];var V=c.subarray(32),Y=c.subarray(16);return gn(V,V),D(Y,Y,V),re(o,Y),0}function De(o,f){return Qe(o,f,a)}function bn(o,f){return r(f,32),De(o,f)}function Le(o,f,s){var n=new Uint8Array(32);return Qe(n,s,f),Nt(o,i,n,Vt)}var vn=Be,no=Ne;function io(o,f,s,n,c,h){var p=new Uint8Array(32);return Le(p,c,h),vn(o,f,s,n,p)}function oo(o,f,s,n,c,h){var p=new Uint8Array(32);return Le(p,c,h),no(o,f,s,n,p)}var En=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function An(o,f,s,n){for(var c=new Int32Array(16),h=new Int32Array(16),p,b,S,j,R,et,N,V,Y,z,W,q,$,H,C,K,B,F,k,U,x,y,E,_,v,T,M=o[0],G=o[1],I=o[2],J=o[3],l=o[4],Q=o[5],rt=o[6],nt=o[7],X=f[0],L=f[1],tt=f[2],lt=f[3],at=f[4],ft=f[5],ct=f[6],ut=f[7],ht=0;n>=128;){for(k=0;k<16;k++)U=8*k+ht,c[k]=s[U+0]<<24|s[U+1]<<16|s[U+2]<<8|s[U+3],h[k]=s[U+4]<<24|s[U+5]<<16|s[U+6]<<8|s[U+7];for(k=0;k<80;k++)if(p=M,b=G,S=I,j=J,R=l,et=Q,N=rt,V=nt,Y=X,z=L,W=tt,q=lt,$=at,H=ft,C=ct,K=ut,x=nt,y=ut,E=y&65535,_=y>>>16,v=x&65535,T=x>>>16,x=(l>>>14|at<<32-14)^(l>>>18|at<<32-18)^(at>>>41-32|l<<32-(41-32)),y=(at>>>14|l<<32-14)^(at>>>18|l<<32-18)^(l>>>41-32|at<<32-(41-32)),E+=y&65535,_+=y>>>16,v+=x&65535,T+=x>>>16,x=l&Q^~l&rt,y=at&ft^~at&ct,E+=y&65535,_+=y>>>16,v+=x&65535,T+=x>>>16,x=En[k*2],y=En[k*2+1],E+=y&65535,_+=y>>>16,v+=x&65535,T+=x>>>16,x=c[k%16],y=h[k%16],E+=y&65535,_+=y>>>16,v+=x&65535,T+=x>>>16,_+=E>>>16,v+=_>>>16,T+=v>>>16,B=v&65535|T<<16,F=E&65535|_<<16,x=B,y=F,E=y&65535,_=y>>>16,v=x&65535,T=x>>>16,x=(M>>>28|X<<32-28)^(X>>>34-32|M<<32-(34-32))^(X>>>39-32|M<<32-(39-32)),y=(X>>>28|M<<32-28)^(M>>>34-32|X<<32-(34-32))^(M>>>39-32|X<<32-(39-32)),E+=y&65535,_+=y>>>16,v+=x&65535,T+=x>>>16,x=M&G^M&I^G&I,y=X&L^X&tt^L&tt,E+=y&65535,_+=y>>>16,v+=x&65535,T+=x>>>16,_+=E>>>16,v+=_>>>16,T+=v>>>16,V=v&65535|T<<16,K=E&65535|_<<16,x=j,y=q,E=y&65535,_=y>>>16,v=x&65535,T=x>>>16,x=B,y=F,E+=y&65535,_+=y>>>16,v+=x&65535,T+=x>>>16,_+=E>>>16,v+=_>>>16,T+=v>>>16,j=v&65535|T<<16,q=E&65535|_<<16,G=p,I=b,J=S,l=j,Q=R,rt=et,nt=N,M=V,L=Y,tt=z,lt=W,at=q,ft=$,ct=H,ut=C,X=K,k%16===15)for(U=0;U<16;U++)x=c[U],y=h[U],E=y&65535,_=y>>>16,v=x&65535,T=x>>>16,x=c[(U+9)%16],y=h[(U+9)%16],E+=y&65535,_+=y>>>16,v+=x&65535,T+=x>>>16,B=c[(U+1)%16],F=h[(U+1)%16],x=(B>>>1|F<<32-1)^(B>>>8|F<<32-8)^B>>>7,y=(F>>>1|B<<32-1)^(F>>>8|B<<32-8)^(F>>>7|B<<32-7),E+=y&65535,_+=y>>>16,v+=x&65535,T+=x>>>16,B=c[(U+14)%16],F=h[(U+14)%16],x=(B>>>19|F<<32-19)^(F>>>61-32|B<<32-(61-32))^B>>>6,y=(F>>>19|B<<32-19)^(B>>>61-32|F<<32-(61-32))^(F>>>6|B<<32-6),E+=y&65535,_+=y>>>16,v+=x&65535,T+=x>>>16,_+=E>>>16,v+=_>>>16,T+=v>>>16,c[U]=v&65535|T<<16,h[U]=E&65535|_<<16;x=M,y=X,E=y&65535,_=y>>>16,v=x&65535,T=x>>>16,x=o[0],y=f[0],E+=y&65535,_+=y>>>16,v+=x&65535,T+=x>>>16,_+=E>>>16,v+=_>>>16,T+=v>>>16,o[0]=M=v&65535|T<<16,f[0]=X=E&65535|_<<16,x=G,y=L,E=y&65535,_=y>>>16,v=x&65535,T=x>>>16,x=o[1],y=f[1],E+=y&65535,_+=y>>>16,v+=x&65535,T+=x>>>16,_+=E>>>16,v+=_>>>16,T+=v>>>16,o[1]=G=v&65535|T<<16,f[1]=L=E&65535|_<<16,x=I,y=tt,E=y&65535,_=y>>>16,v=x&65535,T=x>>>16,x=o[2],y=f[2],E+=y&65535,_+=y>>>16,v+=x&65535,T+=x>>>16,_+=E>>>16,v+=_>>>16,T+=v>>>16,o[2]=I=v&65535|T<<16,f[2]=tt=E&65535|_<<16,x=J,y=lt,E=y&65535,_=y>>>16,v=x&65535,T=x>>>16,x=o[3],y=f[3],E+=y&65535,_+=y>>>16,v+=x&65535,T+=x>>>16,_+=E>>>16,v+=_>>>16,T+=v>>>16,o[3]=J=v&65535|T<<16,f[3]=lt=E&65535|_<<16,x=l,y=at,E=y&65535,_=y>>>16,v=x&65535,T=x>>>16,x=o[4],y=f[4],E+=y&65535,_+=y>>>16,v+=x&65535,T+=x>>>16,_+=E>>>16,v+=_>>>16,T+=v>>>16,o[4]=l=v&65535|T<<16,f[4]=at=E&65535|_<<16,x=Q,y=ft,E=y&65535,_=y>>>16,v=x&65535,T=x>>>16,x=o[5],y=f[5],E+=y&65535,_+=y>>>16,v+=x&65535,T+=x>>>16,_+=E>>>16,v+=_>>>16,T+=v>>>16,o[5]=Q=v&65535|T<<16,f[5]=ft=E&65535|_<<16,x=rt,y=ct,E=y&65535,_=y>>>16,v=x&65535,T=x>>>16,x=o[6],y=f[6],E+=y&65535,_+=y>>>16,v+=x&65535,T+=x>>>16,_+=E>>>16,v+=_>>>16,T+=v>>>16,o[6]=rt=v&65535|T<<16,f[6]=ct=E&65535|_<<16,x=nt,y=ut,E=y&65535,_=y>>>16,v=x&65535,T=x>>>16,x=o[7],y=f[7],E+=y&65535,_+=y>>>16,v+=x&65535,T+=x>>>16,_+=E>>>16,v+=_>>>16,T+=v>>>16,o[7]=nt=v&65535|T<<16,f[7]=ut=E&65535|_<<16,ht+=128,n-=128}return n}function ie(o,f,s){var n=new Int32Array(8),c=new Int32Array(8),h=new Uint8Array(256),p,b=s;for(n[0]=1779033703,n[1]=3144134277,n[2]=1013904242,n[3]=2773480762,n[4]=1359893119,n[5]=2600822924,n[6]=528734635,n[7]=1541459225,c[0]=4089235720,c[1]=2227873595,c[2]=4271175723,c[3]=1595750129,c[4]=2917565137,c[5]=725511199,c[6]=4215389547,c[7]=327033209,An(n,c,f,s),s%=128,p=0;p<s;p++)h[p]=f[b-s+p];for(h[s]=128,s=256-128*(s<112?1:0),h[s-9]=0,it(h,s-8,b/536870912|0,b<<3),An(n,c,h,s),p=0;p<8;p++)it(o,8*p,n[p],c[p]);return 0}function tr(o,f){var s=t(),n=t(),c=t(),h=t(),p=t(),b=t(),S=t(),j=t(),R=t();Ft(s,o[1],o[0]),Ft(R,f[1],f[0]),D(s,s,R),Ct(n,o[0],o[1]),Ct(R,f[0],f[1]),D(n,n,R),D(c,o[3],f[3]),D(c,c,A),D(h,o[2],f[2]),Ct(h,h,h),Ft(p,n,s),Ft(b,h,c),Ct(S,h,c),Ct(j,n,s),D(o[0],p,b),D(o[1],j,S),D(o[2],S,b),D(o[3],p,j)}function Tn(o,f,s){var n;for(n=0;n<4;n++)ee(o[n],f[n],s)}function Br(o,f){var s=t(),n=t(),c=t();gn(c,f[2]),D(s,f[0],c),D(n,f[1],c),re(o,n),o[31]^=wn(s)<<7}function Nr(o,f,s){var n,c;for(Pt(o[0],u),Pt(o[1],d),Pt(o[2],d),Pt(o[3],u),c=255;c>=0;--c)n=s[c/8|0]>>(c&7)&1,Tn(o,f,n),tr(f,o),tr(o,o),Tn(o,f,n)}function er(o,f){var s=[t(),t(),t(),t()];Pt(s[0],P),Pt(s[1],O),Pt(s[2],d),D(s[3],P,O),Nr(o,s,f)}function Pr(o,f,s){var n=new Uint8Array(64),c=[t(),t(),t(),t()],h;for(s||r(f,32),ie(n,f,32),n[0]&=248,n[31]&=127,n[31]|=64,er(c,n),Br(o,c),h=0;h<32;h++)f[h+32]=o[h];return 0}var rr=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function Cr(o,f){var s,n,c,h;for(n=63;n>=32;--n){for(s=0,c=n-32,h=n-12;c<h;++c)f[c]+=s-16*f[n]*rr[c-(n-32)],s=Math.floor((f[c]+128)/256),f[c]-=s*256;f[c]+=s,f[n]=0}for(s=0,c=0;c<32;c++)f[c]+=s-(f[31]>>4)*rr[c],s=f[c]>>8,f[c]&=255;for(c=0;c<32;c++)f[c]-=s*rr[c];for(n=0;n<32;n++)f[n+1]+=f[n]>>8,o[n]=f[n]&255}function Fr(o){var f=new Float64Array(64),s;for(s=0;s<64;s++)f[s]=o[s];for(s=0;s<64;s++)o[s]=0;Cr(o,f)}function Sn(o,f,s,n){var c=new Uint8Array(64),h=new Uint8Array(64),p=new Uint8Array(64),b,S,j=new Float64Array(64),R=[t(),t(),t(),t()];ie(c,n,32),c[0]&=248,c[31]&=127,c[31]|=64;var et=s+64;for(b=0;b<s;b++)o[64+b]=f[b];for(b=0;b<32;b++)o[32+b]=c[32+b];for(ie(p,o.subarray(32),s+32),Fr(p),er(R,p),Br(o,R),b=32;b<64;b++)o[b]=n[b];for(ie(h,o,s+64),Fr(h),b=0;b<64;b++)j[b]=0;for(b=0;b<32;b++)j[b]=p[b];for(b=0;b<32;b++)for(S=0;S<32;S++)j[b+S]+=h[b]*c[S];return Cr(o.subarray(32),j),et}function ao(o,f){var s=t(),n=t(),c=t(),h=t(),p=t(),b=t(),S=t();return Pt(o[2],d),Rr(o[1],f),St(c,o[1]),D(h,c,w),Ft(c,c,o[2]),Ct(h,o[2],h),St(p,h),St(b,p),D(S,b,p),D(s,S,c),D(s,s,h),_n(s,s),D(s,s,c),D(s,s,h),D(s,s,h),D(o[0],s,h),St(n,o[0]),D(n,n,h),Ze(n,c)&&D(o[0],o[0],Z),St(n,o[0]),D(n,n,h),Ze(n,c)?-1:(wn(o[0])===f[31]>>7&&Ft(o[0],u,o[0]),D(o[3],o[0],o[1]),0)}function kr(o,f,s,n){var c,h=new Uint8Array(32),p=new Uint8Array(64),b=[t(),t(),t(),t()],S=[t(),t(),t(),t()];if(s<64||ao(S,n))return-1;for(c=0;c<s;c++)o[c]=f[c];for(c=0;c<32;c++)o[c+32]=n[c];if(ie(p,o,s),Fr(p),Nr(b,S,p),er(S,f.subarray(32)),tr(b,S),Br(h,b),s-=64,Tt(f,0,h,0)){for(c=0;c<s;c++)o[c]=0;return-1}for(c=0;c<s;c++)o[c]=f[c+64];return s}var jr=32,nr=24,Ce=32,ye=16,Fe=32,ir=32,ke=32,je=32,Kr=32,On=nr,so=Ce,fo=ye,It=64,oe=32,me=64,Mr=32,Vr=64;e.lowlevel={crypto_core_hsalsa20:Nt,crypto_stream_xor:Ue,crypto_stream:Xe,crypto_stream_salsa20_xor:Je,crypto_stream_salsa20:Ie,crypto_onetimeauth:Re,crypto_onetimeauth_verify:ne,crypto_verify_16:xt,crypto_verify_32:Tt,crypto_secretbox:Be,crypto_secretbox_open:Ne,crypto_scalarmult:Qe,crypto_scalarmult_base:De,crypto_box_beforenm:Le,crypto_box_afternm:vn,crypto_box:io,crypto_box_open:oo,crypto_box_keypair:bn,crypto_hash:ie,crypto_sign:Sn,crypto_sign_keypair:Pr,crypto_sign_open:kr,crypto_secretbox_KEYBYTES:jr,crypto_secretbox_NONCEBYTES:nr,crypto_secretbox_ZEROBYTES:Ce,crypto_secretbox_BOXZEROBYTES:ye,crypto_scalarmult_BYTES:Fe,crypto_scalarmult_SCALARBYTES:ir,crypto_box_PUBLICKEYBYTES:ke,crypto_box_SECRETKEYBYTES:je,crypto_box_BEFORENMBYTES:Kr,crypto_box_NONCEBYTES:On,crypto_box_ZEROBYTES:so,crypto_box_BOXZEROBYTES:fo,crypto_sign_BYTES:It,crypto_sign_PUBLICKEYBYTES:oe,crypto_sign_SECRETKEYBYTES:me,crypto_sign_SEEDBYTES:Mr,crypto_hash_BYTES:Vr,gf:t,D:w,L:rr,pack25519:re,unpack25519:Rr,M:D,A:Ct,S:St,Z:Ft,pow2523:_n,add:tr,set25519:Pt,modL:Cr,scalarmult:Nr,scalarbase:er};function Un(o,f){if(o.length!==jr)throw new Error("bad key size");if(f.length!==nr)throw new Error("bad nonce size")}function co(o,f){if(o.length!==ke)throw new Error("bad public key size");if(f.length!==je)throw new Error("bad secret key size")}function Et(){for(var o=0;o<arguments.length;o++)if(!(arguments[o]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function Rn(o){for(var f=0;f<o.length;f++)o[f]=0}e.randomBytes=function(o){var f=new Uint8Array(o);return r(f,o),f},e.secretbox=function(o,f,s){Et(o,f,s),Un(s,f);for(var n=new Uint8Array(Ce+o.length),c=new Uint8Array(n.length),h=0;h<o.length;h++)n[h+Ce]=o[h];return Be(c,n,n.length,f,s),c.subarray(ye)},e.secretbox.open=function(o,f,s){Et(o,f,s),Un(s,f);for(var n=new Uint8Array(ye+o.length),c=new Uint8Array(n.length),h=0;h<o.length;h++)n[h+ye]=o[h];return n.length<32||Ne(c,n,n.length,f,s)!==0?null:c.subarray(Ce)},e.secretbox.keyLength=jr,e.secretbox.nonceLength=nr,e.secretbox.overheadLength=ye,e.scalarMult=function(o,f){if(Et(o,f),o.length!==ir)throw new Error("bad n size");if(f.length!==Fe)throw new Error("bad p size");var s=new Uint8Array(Fe);return Qe(s,o,f),s},e.scalarMult.base=function(o){if(Et(o),o.length!==ir)throw new Error("bad n size");var f=new Uint8Array(Fe);return De(f,o),f},e.scalarMult.scalarLength=ir,e.scalarMult.groupElementLength=Fe,e.box=function(o,f,s,n){var c=e.box.before(s,n);return e.secretbox(o,f,c)},e.box.before=function(o,f){Et(o,f),co(o,f);var s=new Uint8Array(Kr);return Le(s,o,f),s},e.box.after=e.secretbox,e.box.open=function(o,f,s,n){var c=e.box.before(s,n);return e.secretbox.open(o,f,c)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var o=new Uint8Array(ke),f=new Uint8Array(je);return bn(o,f),{publicKey:o,secretKey:f}},e.box.keyPair.fromSecretKey=function(o){if(Et(o),o.length!==je)throw new Error("bad secret key size");var f=new Uint8Array(ke);return De(f,o),{publicKey:f,secretKey:new Uint8Array(o)}},e.box.publicKeyLength=ke,e.box.secretKeyLength=je,e.box.sharedKeyLength=Kr,e.box.nonceLength=On,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(o,f){if(Et(o,f),f.length!==me)throw new Error("bad secret key size");var s=new Uint8Array(It+o.length);return Sn(s,o,o.length,f),s},e.sign.open=function(o,f){if(Et(o,f),f.length!==oe)throw new Error("bad public key size");var s=new Uint8Array(o.length),n=kr(s,o,o.length,f);if(n<0)return null;for(var c=new Uint8Array(n),h=0;h<c.length;h++)c[h]=s[h];return c},e.sign.detached=function(o,f){for(var s=e.sign(o,f),n=new Uint8Array(It),c=0;c<n.length;c++)n[c]=s[c];return n},e.sign.detached.verify=function(o,f,s){if(Et(o,f,s),f.length!==It)throw new Error("bad signature size");if(s.length!==oe)throw new Error("bad public key size");var n=new Uint8Array(It+o.length),c=new Uint8Array(It+o.length),h;for(h=0;h<It;h++)n[h]=f[h];for(h=0;h<o.length;h++)n[h+It]=o[h];return kr(c,n,n.length,s)>=0},e.sign.keyPair=function(){var o=new Uint8Array(oe),f=new Uint8Array(me);return Pr(o,f),{publicKey:o,secretKey:f}},e.sign.keyPair.fromSecretKey=function(o){if(Et(o),o.length!==me)throw new Error("bad secret key size");for(var f=new Uint8Array(oe),s=0;s<f.length;s++)f[s]=o[32+s];return{publicKey:f,secretKey:new Uint8Array(o)}},e.sign.keyPair.fromSeed=function(o){if(Et(o),o.length!==Mr)throw new Error("bad seed size");for(var f=new Uint8Array(oe),s=new Uint8Array(me),n=0;n<32;n++)s[n]=o[n];return Pr(f,s,!0),{publicKey:f,secretKey:s}},e.sign.publicKeyLength=oe,e.sign.secretKeyLength=me,e.sign.seedLength=Mr,e.sign.signatureLength=It,e.hash=function(o){Et(o);var f=new Uint8Array(Vr);return ie(f,o,o.length),f},e.hash.hashLength=Vr,e.verify=function(o,f){return Et(o,f),o.length===0||f.length===0||o.length!==f.length?!1:st(o,0,f,0,o.length)===0},e.setPRNG=function(o){r=o},function(){var o=typeof self<"u"?self.crypto||self.msCrypto:null;if(o&&o.getRandomValues){var f=65536;e.setPRNG(function(s,n){var c,h=new Uint8Array(n);for(c=0;c<n;c+=f)o.getRandomValues(h.subarray(c,c+Math.min(n-c,f)));for(c=0;c<n;c++)s[c]=h[c];Rn(h)})}else typeof Bn<"u"&&(o=Ei(),o&&o.randomBytes&&e.setPRNG(function(s,n){var c,h=o.randomBytes(n);for(c=0;c<n;c++)s[c]=h[c];Rn(h)}))}()})(typeof _r<"u"&&_r.exports?_r.exports:self.nacl=self.nacl||{})});var yt=e=>e==null,xo=e=>!yt(e);var mt=e=>xo(e)?[e]:[],At=e=>e?.[0],Kn=async e=>{let t=new Blob([JSON.stringify(e)],{type:"application/json; charset=utf-8"});return new Uint8Array(await t.arrayBuffer())},Mn=async e=>{let t=new Blob([e instanceof Uint8Array?e:new Uint8Array(e)],{type:"application/json; charset=utf-8"});return JSON.parse(await t.text())};var ge=class{callbacks=[];populate(t){this.callbacks.forEach(({callback:r})=>r(t))}subscribe(t){let r=Symbol();return this.callbacks.push({id:r,callback:t}),()=>this.callbacks=this.callbacks.filter(({id:i})=>i!==r)}};var _e=class extends ge{authUser=null;constructor(){super()}static getInstance(){return _e.instance||(_e.instance=new _e),_e.instance}set(t){this.authUser=t,this.populate(t)}get(){return this.authUser}subscribe(t){let r=super.subscribe(t);return t(this.authUser),r}reset(){this.authUser=null,this.populate(this.authUser)}},Yt=_e;ar(Yt,"instance");var Vn=({message:e,detail:t})=>{let r=new CustomEvent(e,{detail:t,bubbles:!0});document.dispatchEvent(r)};var Yn=BigInt(144e11),qn={width:576,height:576},Hn={width:505,height:705},$n="internetcomputer.org";var be=class extends ge{env;constructor(){super()}static getInstance(){return be.instance||(be.instance=new be),be.instance}set(t){this.env=t,this.populate(t)}get(){return this.env}localIdentity(){return this.get()?.localIdentityCanisterId!==void 0}subscribe(t){let r=super.subscribe(t);return t(this.env),r}},bt=be;ar(bt,"instance");var cr=()=>typeof window<"u",Yr=()=>{let e=bt.getInstance().get()?.satelliteId??"unknown";return bt.getInstance().localIdentity()?`http://${e}.localhost:8000`:`https://${e}.icp0.io`};var qr=({width:e,height:t})=>{if(!cr()||yt(window)||yt(window.top))return;let{top:{innerWidth:r,innerHeight:i}}=window,a=i/2+screenY-t/2,u=r/2+screenX-e/2;return`toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=yes, resizable=no, copyhistory=no, width=${e}, height=${t}, top=${a}, left=${u}`};var ur=class{#t;constructor({domain:t}){this.#t=t}get id(){return"internet_identity"}signInOptions({windowed:t}){let r=bt.getInstance().localIdentity()?`http://${bt.getInstance().get()?.localIdentityCanisterId}.localhost:8000`:`https://identity.${this.#t??$n}`;return{...t!==!1&&{windowOpenerFeatures:qr(qn)},identityProvider:r}}},Wn=class{#t;#e;constructor({appName:t,logoUrl:r}){this.#t=t,this.#e=r}get id(){return"nfid"}signInOptions({windowed:t}){return{...t!==!1&&{windowOpenerFeatures:qr(Hn)},identityProvider:`https://nfid.one/authenticate/?applicationName=${encodeURI(this.#t)}&applicationLogo=${encodeURI(this.#e)}`}}};var gi=we(ai());var pr;(function(e){e[e.SysFatal=1]="SysFatal",e[e.SysTransient=2]="SysTransient",e[e.DestinationInvalid=3]="DestinationInvalid",e[e.CanisterReject=4]="CanisterReject",e[e.CanisterError=5]="CanisterError"})(pr||(pr={}));var Go=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(r[i[a]]=e[i[a]]);return r},Jo=new TextEncoder().encode(`
ic-request`),Qt=class{getPrincipal(){return this._principal||(this._principal=ot.selfAuthenticating(new Uint8Array(this.getPublicKey().toDer()))),this._principal}async transformRequest(t){let{body:r}=t,i=Go(t,["body"]),a=await ae(r);return Object.assign(Object.assign({},i),{body:{content:r,sender_pubkey:this.getPublicKey().toDer(),sender_sig:await this.sign(Cn(Jo,a))}})}},Dt=class{getPrincipal(){return ot.anonymous()}async transformRequest(t){return Object.assign(Object.assign({},t),{body:{content:t.body}})}};var si=we(kn());var xr;(function(e){e.Call="call"})(xr||(xr={}));function Ve(){let e=new ArrayBuffer(16),t=new DataView(e),r=BigInt(+Date.now()),i=Math.floor(Math.random()*4294967295),a=Math.floor(Math.random()*4294967295);if(typeof t.setBigUint64=="function")t.setBigUint64(0,r);else{let u=BigInt(1)<<BigInt(32);t.setUint32(0,Number(r>>BigInt(32))),t.setUint32(4,Number(r%u))}return t.setUint32(8,i),t.setUint32(12,a),e}var Io=BigInt(1e6),Xo=BigInt(60*1e3),ce=class{constructor(t){this._value=(BigInt(Date.now())+BigInt(t)-Xo)*Io}toCBOR(){return si.value.u64(this._value.toString(16),16)}toHash(){return Pn(this._value)}};function fi(e=Ve){return async t=>{let r=e(),i=t.request.headers?new Headers(t.request.headers):new Headers;t.request.headers=i,t.endpoint==="call"&&(t.body.nonce=e())}}var $t;(function(e){e.Received="received",e.Processing="processing",e.Replied="replied",e.Rejected="rejected",e.Unknown="unknown",e.Done="done"})($t||($t={}));var yr=5*60*1e3,Qo="308182301d060d2b0601040182dc7c0503010201060c2b0601040182dc7c05030201036100814c0e6ec71fab583b08bd81373c255c3c371b2e84863c98a4f1e08b74235d14fb5d9c0cd546d9685f913a0c0b2cc5341583bf4b4392e467db96d65b9bb4cb717112f8472e0d5a4d14505ffd7484b01291091c5f87b98883463f98091a0baaae",Do="ic0.app",Lo=".ic0.app",ta="icp0.io",ea=".icp0.io",ra="icp-api.io",na=".icp-api.io",Ye=class extends Ke{constructor(t){super(t),this.message=t}},Ae=class extends Ke{constructor(t){super(t),this.message=t}};function ia(){let e;if(typeof window<"u")if(window.fetch)e=window.fetch.bind(window);else throw new Ye("Fetch implementation was not available. You appear to be in a browser context, but window.fetch was not present.");else if(typeof globalThis<"u")if(globalThis.fetch)e=globalThis.fetch.bind(globalThis);else throw new Ye("Fetch implementation was not available. You appear to be in a Node.js context, but global.fetch was not available.");else typeof self<"u"&&self.fetch&&(e=self.fetch.bind(self));if(e)return e;throw new Ye("Fetch implementation was not available. Please provide fetch to the HttpAgent constructor, or ensure it is available in the window or global context.")}var ue=class{constructor(t={}){if(this.rootKey=Fn(Qo),this._pipeline=[],this._timeDiffMsecs=0,this._rootKeyFetched=!1,this._retryTimes=3,this._isAgent=!0,t.source){if(!(t.source instanceof ue))throw new Error("An Agent's source can only be another HttpAgent");this._pipeline=[...t.source._pipeline],this._identity=t.source._identity,this._fetch=t.source._fetch,this._host=t.source._host,this._credentials=t.source._credentials}else this._fetch=t.fetch||ia()||fetch.bind(globalThis),this._fetchOptions=t.fetchOptions,this._callOptions=t.callOptions;if(t.host!==void 0)!t.host.match(/^[a-z]+:/)&&typeof window<"u"?this._host=new URL(window.location.protocol+"//"+t.host):this._host=new URL(t.host);else if(t.source!==void 0)this._host=t.source._host;else{let r=typeof window<"u"?window.location:void 0;if(!r)throw new Error("Must specify a host to connect to.");this._host=new URL(r+"")}if(t.retryTimes!==void 0&&(this._retryTimes=t.retryTimes),this._host.hostname.endsWith(Lo)?this._host.hostname=Do:this._host.hostname.endsWith(ea)?this._host.hostname=ta:this._host.hostname.endsWith(na)&&(this._host.hostname=ra),t.credentials){let{name:r,password:i}=t.credentials;this._credentials=`${r}${i?":"+i:""}`}this._identity=Promise.resolve(t.identity||new Dt),t.disableNonce||this.addTransform(fi(Ve))}isLocal(){let t=this._host.hostname;return t==="127.0.0.1"||t.endsWith("localhost")}addTransform(t,r=t.priority||0){let i=this._pipeline.findIndex(a=>(a.priority||0)<r);this._pipeline.splice(i>=0?i:this._pipeline.length,0,Object.assign(t,{priority:r}))}async getPrincipal(){if(!this._identity)throw new Ae("This identity has expired due this application's security policy. Please refresh your authentication.");return(await this._identity).getPrincipal()}async call(t,r,i){let a=await(i!==void 0?await i:await this._identity);if(!a)throw new Ae("This identity has expired due this application's security policy. Please refresh your authentication.");let u=ot.from(t),d=r.effectiveCanisterId?ot.from(r.effectiveCanisterId):u,m=a.getPrincipal()||ot.anonymous(),w=new ce(yr);Math.abs(this._timeDiffMsecs)>1e3*30&&(w=new ce(yr+this._timeDiffMsecs));let A={request_type:xr.Call,canister_id:u,method_name:r.methodName,arg:r.arg,sender:m,ingress_expiry:w},P=await this._transform({request:{body:null,method:"POST",headers:new Headers(Object.assign({"Content-Type":"application/cbor"},this._credentials?{Authorization:"Basic "+btoa(this._credentials)}:{}))},endpoint:"call",body:A});P=await a.transformRequest(P);let O=sr(P.body),Z=this._requestAndRetry(()=>this._fetch(""+new URL(`/api/v2/canister/${d.toText()}/call`,this._host),Object.assign(Object.assign(Object.assign({},this._callOptions),P.request),{body:O}))),[it,st]=await Promise.all([Z,ae(A)]);return{requestId:st,response:{ok:it.ok,status:it.status,statusText:it.statusText}}}async _requestAndRetry(t,r=0){if(r>this._retryTimes&&this._retryTimes!==0)throw new Error(`AgentError: Exceeded configured limit of ${this._retryTimes} retry attempts. Please check your network connection or try again in a few moments`);let i=await t();if(!i.ok){let a=await i.clone().text(),u=`Server returned an error:
  Code: ${i.status} (${i.statusText})
  Body: ${a}
`;if(this._retryTimes>r)return console.warn(u+"  Retrying request."),await this._requestAndRetry(t,r+1);throw new Error(u)}return i}async query(t,r,i){let a=await(i!==void 0?await i:await this._identity);if(!a)throw new Ae("This identity has expired due this application's security policy. Please refresh your authentication.");let u=typeof t=="string"?ot.fromText(t):t,d=a?.getPrincipal()||ot.anonymous(),m={request_type:"query",canister_id:u,method_name:r.methodName,arg:r.arg,sender:d,ingress_expiry:new ce(yr)},w=await this._transform({request:{method:"POST",headers:new Headers(Object.assign({"Content-Type":"application/cbor"},this._credentials?{Authorization:"Basic "+btoa(this._credentials)}:{}))},endpoint:"read",body:m});w=await a?.transformRequest(w);let A=sr(w.body),P=await this._requestAndRetry(()=>this._fetch(""+new URL(`/api/v2/canister/${u.toText()}/query`,this._host),Object.assign(Object.assign(Object.assign({},this._fetchOptions),w.request),{body:A})));return fr(await P.arrayBuffer())}async createReadStateRequest(t,r){let i=await(r!==void 0?await r:await this._identity);if(!i)throw new Ae("This identity has expired due this application's security policy. Please refresh your authentication.");let a=i?.getPrincipal()||ot.anonymous(),u=await this._transform({request:{method:"POST",headers:new Headers(Object.assign({"Content-Type":"application/cbor"},this._credentials?{Authorization:"Basic "+btoa(this._credentials)}:{}))},endpoint:"read_state",body:{request_type:"read_state",paths:t.paths,sender:a,ingress_expiry:new ce(yr)}});return i?.transformRequest(u)}async readState(t,r,i,a){let u=typeof t=="string"?ot.fromText(t):t,d=a??await this.createReadStateRequest(r,i),m=sr(d.body),w=await this._requestAndRetry(()=>this._fetch(""+new URL(`/api/v2/canister/${u}/read_state`,this._host),Object.assign(Object.assign(Object.assign({},this._fetchOptions),d.request),{body:m})));if(!w.ok)throw new Error(`Server returned an error:
  Code: ${w.status} (${w.statusText})
  Body: ${await w.text()}
`);return fr(await w.arrayBuffer())}async syncTime(t){let r=await import("./canisterStatus-QA2NYBQ6.js"),i=Date.now();try{t||console.log("Syncing time with the IC. No canisterId provided, so falling back to ryjl3-tyaaa-aaaaa-aaaba-cai");let u=(await r.request({canisterId:t??ot.from("ryjl3-tyaaa-aaaaa-aaaba-cai"),agent:this,paths:["time"]})).get("time");u&&(this._timeDiffMsecs=Number(u)-Number(i))}catch(a){console.error("Caught exception while attempting to sync time:",a)}}async status(){let t=this._credentials?{Authorization:"Basic "+btoa(this._credentials)}:{},r=await this._requestAndRetry(()=>this._fetch(""+new URL("/api/v2/status",this._host),Object.assign({headers:t},this._fetchOptions)));return fr(await r.arrayBuffer())}async fetchRootKey(){return this._rootKeyFetched||(this.rootKey=(await this.status()).root_key,this._rootKeyFetched=!0),this.rootKey}invalidateIdentity(){this._identity=null}replaceIdentity(t){this._identity=Promise.resolve(t)}_transform(t){let r=Promise.resolve(t);for(let i of this._pipeline)r=r.then(a=>i(a).then(u=>u||a));return r}};var ci;(function(e){e.Error="err",e.GetPrincipal="gp",e.GetPrincipalResponse="gpr",e.Query="q",e.QueryResponse="qr",e.Call="c",e.CallResponse="cr",e.ReadState="rs",e.ReadStateResponse="rsr",e.Status="s",e.StatusResponse="sr"})(ci||(ci={}));function Zr(){let e=typeof window>"u"?typeof globalThis>"u"?typeof self>"u"?void 0:self.ic.agent:globalThis.ic.agent:window.ic.agent;if(!e)throw new Error("No Agent could be found.");return e}var mr={};Nn(mr,{backoff:()=>pi,chain:()=>xi,conditionalDelay:()=>di,defaultStrategy:()=>ui,maxAttempts:()=>aa,once:()=>li,throttle:()=>sa,timeout:()=>hi});var oa=5*60*1e3;function ui(){return xi(di(li(),1e3),pi(1e3,1.2),hi(oa))}function li(){let e=!0;return async()=>e?(e=!1,!0):!1}function di(e,t){return async(r,i,a)=>{if(await e(r,i,a))return new Promise(u=>setTimeout(u,t))}}function aa(e){let t=e;return async(r,i,a)=>{if(--t<=0)throw new Error(`Failed to retrieve a reply for request after ${e} attempts:
  Request ID: ${Xt(i)}
  Request status: ${a}
`)}}function sa(e){return()=>new Promise(t=>setTimeout(t,e))}function hi(e){let t=Date.now()+e;return async(r,i,a)=>{if(Date.now()>t)throw new Error(`Request timed out after ${e} msec:
  Request ID: ${Xt(i)}
  Request status: ${a}
`)}}function pi(e,t){let r=e;return()=>new Promise(i=>setTimeout(()=>{r*=t,i()},r))}function xi(...e){return async(t,r,i)=>{for(let a of e)await a(t,r,i)}}async function Qr(e,t,r,i,a,u){var d;let m=[new TextEncoder().encode("request_status"),r],w=a??await((d=e.createReadStateRequest)===null||d===void 0?void 0:d.call(e,{paths:[m]})),A=await e.readState(t,{paths:[m]},void 0,w);if(e.rootKey==null)throw new Error("Agent root key not initialized before polling");let P=await jn.create({certificate:A.certificate,rootKey:e.rootKey,canisterId:t,blsVerify:u}),O=P.lookup([...m,new TextEncoder().encode("status")]),Z;switch(typeof O>"u"?Z=$t.Unknown:Z=new TextDecoder().decode(O),Z){case $t.Replied:return P.lookup([...m,"reply"]);case $t.Received:case $t.Unknown:case $t.Processing:return await i(t,r,Z),Qr(e,t,r,i,w);case $t.Rejected:{let it=new Uint8Array(P.lookup([...m,"reject_code"]))[0],st=new TextDecoder().decode(P.lookup([...m,"reject_message"]));throw new Error(`Call was rejected:
  Request ID: ${Xt(r)}
  Reject code: ${it}
  Reject text: ${st}
`)}case $t.Done:throw new Error(`Call was marked as done but we never saw the reply:
  Request ID: ${Xt(r)}
`)}throw new Error("unreachable")}var yi=({IDL:e})=>{let t=e.Principal,r=e.Record({controllers:e.Vec(e.Principal),freezing_threshold:e.Nat,memory_allocation:e.Nat,compute_allocation:e.Nat}),i=e.Record({controllers:e.Opt(e.Vec(e.Principal)),freezing_threshold:e.Opt(e.Nat),memory_allocation:e.Opt(e.Nat),compute_allocation:e.Opt(e.Nat)}),a=e.Vec(e.Nat8);return e.Service({canister_status:e.Func([e.Record({canister_id:t})],[e.Record({status:e.Variant({stopped:e.Null,stopping:e.Null,running:e.Null}),memory_size:e.Nat,cycles:e.Nat,settings:r,module_hash:e.Opt(e.Vec(e.Nat8))})],[]),create_canister:e.Func([e.Record({settings:e.Opt(i)})],[e.Record({canister_id:t})],[]),delete_canister:e.Func([e.Record({canister_id:t})],[],[]),deposit_cycles:e.Func([e.Record({canister_id:t})],[],[]),install_code:e.Func([e.Record({arg:e.Vec(e.Nat8),wasm_module:a,mode:e.Variant({reinstall:e.Null,upgrade:e.Null,install:e.Null}),canister_id:t})],[],[]),provisional_create_canister_with_cycles:e.Func([e.Record({settings:e.Opt(i),amount:e.Opt(e.Nat)})],[e.Record({canister_id:t})],[]),provisional_top_up_canister:e.Func([e.Record({canister_id:t,amount:e.Nat})],[],[]),raw_rand:e.Func([],[e.Vec(e.Nat8)],[]),start_canister:e.Func([e.Record({canister_id:t})],[],[]),stop_canister:e.Func([e.Record({canister_id:t})],[],[]),uninstall_code:e.Func([e.Record({canister_id:t})],[],[]),update_settings:e.Func([e.Record({canister_id:e.Principal,settings:i})],[],[])})};var wr=class extends Ke{constructor(t,r,i,a){super(["Call failed:",`  Canister: ${t.toText()}`,`  Method: ${r} (${i})`,...Object.getOwnPropertyNames(a).map(u=>`  "${u}": ${JSON.stringify(a[u])}`)].join(`
`)),this.canisterId=t,this.methodName=r,this.type=i,this.props=a}},Dr=class extends wr{constructor(t,r,i){var a;super(t,r,"query",{Status:i.status,Code:(a=pr[i.reject_code])!==null&&a!==void 0?a:`Unknown Code "${i.reject_code}"`,Message:i.reject_message}),this.result=i}},Lr=class extends wr{constructor(t,r,i,a){super(t,r,"update",{"Request ID":Xt(i),"HTTP status code":a.status.toString(),"HTTP status text":a.statusText}),this.requestId=i,this.response=a}},tn;(function(e){e.Install="install",e.Reinstall="reinstall",e.Upgrade="upgrade"})(tn||(tn={}));var Ut=Symbol.for("ic-agent-metadata"),Lt=class{constructor(t){this[Ut]=Object.freeze(t)}static agentOf(t){return t[Ut].config.agent}static interfaceOf(t){return t[Ut].service}static canisterIdOf(t){return ot.from(t[Ut].config.canisterId)}static async install(t,r){let i=t.mode===void 0?tn.Install:t.mode,a=t.arg?[...new Uint8Array(t.arg)]:[],u=[...new Uint8Array(t.module)],d=typeof r.canisterId=="string"?ot.fromText(r.canisterId):r.canisterId;await wi(r).install_code({mode:{[i]:null},arg:a,wasm_module:u,canister_id:d})}static async createCanister(t){let{canister_id:r}=await wi(t||{}).provisional_create_canister_with_cycles({amount:[],settings:[]});return r}static async createAndInstallCanister(t,r,i){let a=await this.createCanister(i);return await this.install(Object.assign({},r),Object.assign(Object.assign({},i),{canisterId:a})),this.createActor(t,Object.assign(Object.assign({},i),{canisterId:a}))}static createActorClass(t){let r=t({IDL:Me});class i extends Lt{constructor(u){let d=typeof u.canisterId=="string"?ot.fromText(u.canisterId):u.canisterId;super({config:Object.assign(Object.assign(Object.assign({},_i),u),{canisterId:d}),service:r});for(let[m,w]of r._fields)this[m]=ca(this,m,w,u.blsVerify)}}return i}static createActor(t,r){return new(this.createActorClass(t))(r)}};function mi(e,t){let r=Me.decode(e,gi.Buffer.from(t));switch(r.length){case 0:return;case 1:return r[0];default:return r}}var _i={pollingStrategyFactory:mr.defaultStrategy};function ca(e,t,r,i){let a;r.annotations.includes("query")?a=async(d,...m)=>{var w,A;d=Object.assign(Object.assign({},d),(A=(w=e[Ut].config).queryTransform)===null||A===void 0?void 0:A.call(w,t,m,Object.assign(Object.assign({},e[Ut].config),d)));let P=d.agent||e[Ut].config.agent||Zr(),O=ot.from(d.canisterId||e[Ut].config.canisterId),Z=Me.encode(r.argTypes,m),it=await P.query(O,{methodName:t,arg:Z});switch(it.status){case"rejected":throw new Dr(O,t,it);case"replied":return mi(r.retTypes,it.reply.arg)}}:a=async(d,...m)=>{var w,A;d=Object.assign(Object.assign({},d),(A=(w=e[Ut].config).callTransform)===null||A===void 0?void 0:A.call(w,t,m,Object.assign(Object.assign({},e[Ut].config),d)));let P=d.agent||e[Ut].config.agent||Zr(),{canisterId:O,effectiveCanisterId:Z,pollingStrategyFactory:it}=Object.assign(Object.assign(Object.assign({},_i),e[Ut].config),d),st=ot.from(O),xt=Z!==void 0?ot.from(Z):st,Tt=Me.encode(r.argTypes,m),{requestId:dt,response:Bt}=await P.call(st,{methodName:t,arg:Tt,effectiveCanisterId:xt});if(!Bt.ok)throw new Lr(st,t,dt,Bt);let Mt=it(),Nt=await Qr(P,xt,dt,Mt,i);if(Nt!==void 0)return mi(r.retTypes,Nt);if(r.retTypes.length===0)return;throw new Error(`Call was returned undefined, but type [${r.retTypes.join(",")}].`)};let u=(...d)=>a({},...d);return u.withOptions=d=>(...m)=>a(d,...m),u}function wi(e){function t(r,i,a){let u=i[0],d=ot.fromHex("");return u&&typeof u=="object"&&u.canister_id&&(d=ot.from(u.canister_id)),{effectiveCanisterId:d}}return Lt.createActor(yi,Object.assign(Object.assign(Object.assign({},e),{canisterId:ot.fromHex("")}),{callTransform:t,queryTransform:t}))}var qe=we(en());function Te(e){var t;return new Uint8Array(((t=e.match(/.{1,2}/g))!==null&&t!==void 0?t:[]).map(r=>parseInt(r,16))).buffer}function te(e){return new Uint8Array(e).reduce((t,r)=>t+r.toString(16).padStart(2,"0"),"")}var da=(e,t)=>{if(e.byteLength!==t.byteLength)return!1;let r=new Uint8Array(e),i=new Uint8Array(t);for(let a=0;a<r.length;a++)if(r[a]!==i[a])return!1;return!0},Ai=e=>{if(e<=127)return 1;if(e<=255)return 2;if(e<=65535)return 3;if(e<=16777215)return 4;throw new Error("Length too long (> 4 bytes)")},Ti=(e,t,r)=>{if(r<=127)return e[t]=r,1;if(r<=255)return e[t]=129,e[t+1]=r,2;if(r<=65535)return e[t]=130,e[t+1]=r>>8,e[t+2]=r,3;if(r<=16777215)return e[t]=131,e[t+1]=r>>16,e[t+2]=r>>8,e[t+3]=r,4;throw new Error("Length too long (> 4 bytes)")},rn=(e,t)=>{if(e[t]<128)return 1;if(e[t]===128)throw new Error("Invalid length 0");if(e[t]===129)return 2;if(e[t]===130)return 3;if(e[t]===131)return 4;throw new Error("Length too long (> 4 bytes)")},ha=(e,t)=>{let r=rn(e,t);if(r===1)return e[t];if(r===2)return e[t+1];if(r===3)return(e[t+1]<<8)+e[t+2];if(r===4)return(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];throw new Error("Length too long (> 4 bytes)")},Si=Uint8Array.from([48,12,6,10,43,6,1,4,1,131,184,67,1,1]),br=Uint8Array.from([48,5,6,3,43,101,112]),vf=Uint8Array.from([48,16,6,7,42,134,72,206,61,2,1,6,5,43,129,4,0,10]);function vr(e,t){let r=2+Ai(e.byteLength+1),i=t.byteLength+r+e.byteLength,a=0,u=new Uint8Array(1+Ai(i)+i);return u[a++]=48,a+=Ti(u,a,i),u.set(t,a),a+=t.byteLength,u[a++]=3,a+=Ti(u,a,e.byteLength+1),u[a++]=0,u.set(new Uint8Array(e),a),u}var nn=(e,t)=>{let r=0,i=(m,w)=>{if(a[r++]!==m)throw new Error("Expected: "+w)},a=new Uint8Array(e);if(i(48,"sequence"),r+=rn(a,r),!da(a.slice(r,r+t.byteLength),t))throw new Error("Not the expected OID.");r+=t.byteLength,i(3,"bit string");let u=ha(a,r)-1;r+=rn(a,r),i(0,"0 padding");let d=a.slice(r);if(u!==d.length)throw new Error(`DER payload mismatch: Expected length ${u} actual length ${d.length}`);return d};var Rt=class{constructor(t){this.rawKey=t,this.derKey=Rt.derEncode(t)}static from(t){return this.fromDer(t.toDer())}static fromRaw(t){return new Rt(t)}static fromDer(t){return new Rt(this.derDecode(t))}static derEncode(t){return vr(t,br).buffer}static derDecode(t){let r=nn(t,br);if(r.length!==this.RAW_KEY_LENGTH)throw new Error("An Ed25519 public key must be exactly 32bytes long");return r}toDer(){return this.derKey}toRaw(){return this.rawKey}};Rt.RAW_KEY_LENGTH=32;var kt=class extends Qt{constructor(t,r){super(),this._privateKey=r,this._publicKey=Rt.from(t)}static generate(t){if(t&&t.length!==32)throw new Error("Ed25519 Seed needs to be 32 bytes long.");let{publicKey:r,secretKey:i}=t===void 0?qe.sign.keyPair():qe.sign.keyPair.fromSeed(t);return new this(Rt.fromRaw(r),i)}static fromParsedJson(t){let[r,i]=t;return new kt(Rt.fromDer(Te(r)),Te(i))}static fromJSON(t){let r=JSON.parse(t);if(Array.isArray(r)){if(typeof r[0]=="string"&&typeof r[1]=="string")return this.fromParsedJson([r[0],r[1]]);throw new Error("Deserialization error: JSON must have at least 2 items.")}throw new Error(`Deserialization error: Invalid JSON type for string: ${JSON.stringify(t)}`)}static fromKeyPair(t,r){return new kt(Rt.fromRaw(t),r)}static fromSecretKey(t){let r=qe.sign.keyPair.fromSecretKey(new Uint8Array(t));return kt.fromKeyPair(r.publicKey,r.secretKey)}toJSON(){return[te(this._publicKey.toDer()),te(this._privateKey)]}getKeyPair(){return{secretKey:this._privateKey,publicKey:this._publicKey}}getPublicKey(){return this._publicKey}async sign(t){let r=new Uint8Array(t);return qe.sign.detached(r,new Uint8Array(this._privateKey)).buffer}};var He=class extends Error{constructor(t){super(t),this.message=t,Object.setPrototypeOf(this,He.prototype)}};function Oi(e){if(e)return e;if(typeof crypto<"u"&&crypto.subtle)return crypto.subtle;throw new He("Global crypto was not available and none was provided. Please inlcude a SubtleCrypto implementation. See https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto")}var de=class extends Qt{constructor(t,r,i){super(),this._keyPair=t,this._derKey=r,this._subtleCrypto=i}static async generate(t){let{extractable:r=!1,keyUsages:i=["sign","verify"],subtleCrypto:a}=t??{},u=Oi(a),d=await u.generateKey({name:"ECDSA",namedCurve:"P-256"},r,i),m=await u.exportKey("spki",d.publicKey);return new this(d,m,u)}static async fromKeyPair(t,r){let i=Oi(r),a=await i.exportKey("spki",t.publicKey);return new de(t,a,i)}getKeyPair(){return this._keyPair}getPublicKey(){let t=this._derKey,r=Object.create(this._keyPair.publicKey);return r.toDer=function(){return t},r}async sign(t){let r={name:"ECDSA",hash:{name:"SHA-256"}};return this._keyPair.privateKey,await this._subtleCrypto.sign(r,this._keyPair.privateKey,t)}};var Se=we(kn());var pa=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(r[i[a]]=e[i[a]]);return r},xa=new TextEncoder().encode("ic-request-auth-delegation"),ya=new TextEncoder().encode(`
ic-request`);function on(e){if(typeof e!="string"||e.length<64)throw new Error("Invalid public key.");return Te(e)}var Oe=class{constructor(t,r,i){this.pubkey=t,this.expiration=r,this.targets=i}toCBOR(){return Se.value.map(Object.assign({pubkey:Se.value.bytes(this.pubkey),expiration:Se.value.u64(this.expiration.toString(16),16)},this.targets&&{targets:Se.value.array(this.targets.map(t=>Se.value.bytes(t.toUint8Array())))}))}toJSON(){return Object.assign({expiration:this.expiration.toString(16),pubkey:te(this.pubkey)},this.targets&&{targets:this.targets.map(t=>t.toHex())})}};async function ma(e,t,r,i){let a=new Oe(t.toDer(),BigInt(+r)*BigInt(1e6),i),u=new Uint8Array([...xa,...new Uint8Array(ae(a))]),d=await e.sign(u);return{delegation:a,signature:d}}var he=class{constructor(t,r){this.delegations=t,this.publicKey=r}static async create(t,r,i=new Date(Date.now()+15*60*1e3),a={}){var u,d;let m=await ma(t,r,i,a.targets);return new he([...((u=a.previous)===null||u===void 0?void 0:u.delegations)||[],m],((d=a.previous)===null||d===void 0?void 0:d.publicKey)||t.getPublicKey().toDer())}static fromJSON(t){let{publicKey:r,delegations:i}=typeof t=="string"?JSON.parse(t):t;if(!Array.isArray(i))throw new Error("Invalid delegations.");let a=i.map(u=>{let{delegation:d,signature:m}=u,{pubkey:w,expiration:A,targets:P}=d;if(P!==void 0&&!Array.isArray(P))throw new Error("Invalid targets.");return{delegation:new Oe(on(w),BigInt(`0x${A}`),P&&P.map(O=>{if(typeof O!="string")throw new Error("Invalid target.");return ot.fromHex(O)})),signature:on(m)}});return new this(a,on(r))}static fromDelegations(t,r){return new this(t,r)}toJSON(){return{delegations:this.delegations.map(t=>{let{delegation:r,signature:i}=t,{targets:a}=r;return{delegation:Object.assign({expiration:r.expiration.toString(16),pubkey:te(r.pubkey)},a&&{targets:a.map(u=>u.toHex())}),signature:te(i)}}),publicKey:te(this.publicKey)}}},$e=class extends Qt{constructor(t,r){super(),this._inner=t,this._delegation=r}static fromDelegation(t,r){return new this(t,r)}getDelegation(){return this._delegation}getPublicKey(){return{toDer:()=>this._delegation.publicKey}}sign(t){return this._inner.sign(t)}async transformRequest(t){let{body:r}=t,i=pa(t,["body"]),a=await ae(r);return Object.assign(Object.assign({},i),{body:{content:r,sender_sig:await this.sign(new Uint8Array([...ya,...new Uint8Array(a)])),sender_delegation:this._delegation.delegations,sender_pubkey:this._delegation.publicKey}})}};function Ui(e,t){for(let{delegation:a}of e.delegations)if(+new Date(Number(a.expiration/BigInt(1e6)))<=+Date.now())return!1;let r=[],i=t?.scope;i&&(Array.isArray(i)?r.push(...i.map(a=>typeof a=="string"?ot.fromText(a):a)):r.push(typeof i=="string"?ot.fromText(i):i));for(let a of r){let u=a.toText();for(let{delegation:d}of e.delegations){if(d.targets===void 0)continue;let m=!0;for(let w of d.targets)if(w.toText()===u){m=!1;break}if(m)return!1}}return!0}var wa=we(po()),ga=we(en());var Ri;(function(e){e[e.ECDSA_WITH_SHA256=-7]="ECDSA_WITH_SHA256"})(Ri||(Ri={}));var Bi=["mousedown","mousemove","keydown","touchstart","wheel"],We=class{constructor(t={}){var r;this.callbacks=[],this.idleTimeout=10*60*1e3,this.timeoutID=void 0;let{onIdle:i,idleTimeout:a=10*60*1e3}=t||{};this.callbacks=i?[i]:[],this.idleTimeout=a;let u=this._resetTimer.bind(this);window.addEventListener("load",u,!0),Bi.forEach(function(m){document.addEventListener(m,u,!0)});let d=(m,w)=>{let A;return(...P)=>{let O=this,Z=function(){A=void 0,m.apply(O,P)};clearTimeout(A),A=window.setTimeout(Z,w)}};if(t?.captureScroll){let m=d(u,(r=t?.scrollDebounce)!==null&&r!==void 0?r:100);window.addEventListener("scroll",m,!0)}u()}static create(t={}){return new this(t)}registerCallback(t){this.callbacks.push(t)}exit(){clearTimeout(this.timeoutID),window.removeEventListener("load",this._resetTimer,!0);let t=this._resetTimer.bind(this);Bi.forEach(function(r){document.removeEventListener(r,t,!0)}),this.callbacks.forEach(r=>r())}_resetTimer(){let t=this.exit.bind(this);window.clearTimeout(this.timeoutID),this.timeoutID=window.setTimeout(t,this.idleTimeout)}};var _a=(e,t)=>t.some(r=>e instanceof r),Ni,Pi;function ba(){return Ni||(Ni=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function va(){return Pi||(Pi=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Ci=new WeakMap,sn=new WeakMap,Fi=new WeakMap,an=new WeakMap,cn=new WeakMap;function Ea(e){let t=new Promise((r,i)=>{let a=()=>{e.removeEventListener("success",u),e.removeEventListener("error",d)},u=()=>{r(Wt(e.result)),a()},d=()=>{i(e.error),a()};e.addEventListener("success",u),e.addEventListener("error",d)});return t.then(r=>{r instanceof IDBCursor&&Ci.set(r,e)}).catch(()=>{}),cn.set(t,e),t}function Aa(e){if(sn.has(e))return;let t=new Promise((r,i)=>{let a=()=>{e.removeEventListener("complete",u),e.removeEventListener("error",d),e.removeEventListener("abort",d)},u=()=>{r(),a()},d=()=>{i(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",u),e.addEventListener("error",d),e.addEventListener("abort",d)});sn.set(e,t)}var fn={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return sn.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Fi.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Wt(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function ki(e){fn=e(fn)}function Ta(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){let i=e.call(Er(this),t,...r);return Fi.set(i,t.sort?t.sort():[t]),Wt(i)}:va().includes(e)?function(...t){return e.apply(Er(this),t),Wt(Ci.get(this))}:function(...t){return Wt(e.apply(Er(this),t))}}function Sa(e){return typeof e=="function"?Ta(e):(e instanceof IDBTransaction&&Aa(e),_a(e,ba())?new Proxy(e,fn):e)}function Wt(e){if(e instanceof IDBRequest)return Ea(e);if(an.has(e))return an.get(e);let t=Sa(e);return t!==e&&(an.set(e,t),cn.set(t,e)),t}var Er=e=>cn.get(e);function Ki(e,t,{blocked:r,upgrade:i,blocking:a,terminated:u}={}){let d=indexedDB.open(e,t),m=Wt(d);return i&&d.addEventListener("upgradeneeded",w=>{i(Wt(d.result),w.oldVersion,w.newVersion,Wt(d.transaction),w)}),r&&d.addEventListener("blocked",w=>r(w.oldVersion,w.newVersion,w)),m.then(w=>{u&&w.addEventListener("close",()=>u()),a&&w.addEventListener("versionchange",A=>a(A.oldVersion,A.newVersion,A))}).catch(()=>{}),m}var Oa=["get","getKey","getAll","getAllKeys","count"],Ua=["put","add","delete","clear"],un=new Map;function ji(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(un.get(t))return un.get(t);let r=t.replace(/FromIndex$/,""),i=t!==r,a=Ua.includes(r);if(!(r in(i?IDBIndex:IDBObjectStore).prototype)||!(a||Oa.includes(r)))return;let u=async function(d,...m){let w=this.transaction(d,a?"readwrite":"readonly"),A=w.store;return i&&(A=A.index(m.shift())),(await Promise.all([A[r](...m),a&&w.done]))[0]};return un.set(t,u),u}ki(e=>({...e,get:(t,r,i)=>ji(t,r)||e.get(t,r,i),has:(t,r)=>!!ji(t,r)||e.has(t,r)}));var Mi="auth-client-db",Vi="ic-keyval",Ra=async(e=Mi,t=Vi,r)=>(Ar&&(localStorage!=null&&localStorage.getItem(jt))&&(localStorage.removeItem(jt),localStorage.removeItem(Kt)),await Ki(e,r,{upgrade:i=>{i.objectStoreNames,i.objectStoreNames.contains(t)&&i.clear(t),i.createObjectStore(t)}}));async function Ba(e,t,r){return await e.get(t,r)}async function Na(e,t,r,i){return await e.put(t,i,r)}async function Pa(e,t,r){return await e.delete(t,r)}var pe=class{constructor(t,r){this._db=t,this._storeName=r}static async create(t){let{dbName:r=Mi,storeName:i=Vi,version:a=1}=t??{},u=await Ra(r,i,a);return new pe(u,i)}async set(t,r){return await Na(this._db,this._storeName,t,r)}async get(t){var r;return(r=await Ba(this._db,this._storeName,t))!==null&&r!==void 0?r:null}async remove(t){return await Pa(this._db,this._storeName,t)}};var Kt="identity",jt="delegation",Yi="iv",Ca=1,Ar=typeof window<"u",ze=class{constructor(t="ic-",r){this.prefix=t,this._localStorage=r}get(t){return Promise.resolve(this._getLocalStorage().getItem(this.prefix+t))}set(t,r){return this._getLocalStorage().setItem(this.prefix+t,r),Promise.resolve()}remove(t){return this._getLocalStorage().removeItem(this.prefix+t),Promise.resolve()}_getLocalStorage(){if(this._localStorage)return this._localStorage;let t=typeof window>"u"?typeof globalThis>"u"?typeof self>"u"?void 0:self.localStorage:globalThis.localStorage:window.localStorage;if(!t)throw new Error("Could not find local storage.");return t}},Ge=class{get _db(){return new Promise(t=>{if(this.initializedDb){t(this.initializedDb);return}pe.create({version:Ca}).then(r=>{this.initializedDb=r,t(r)})})}async get(t){return await(await this._db).get(t)}async set(t,r){await(await this._db).set(t,r)}async remove(t){await(await this._db).remove(t)}};var Fa="https://identity.ic0.app",ka="#authorize",ln="ECDSA",dn="Ed25519",ja=500,Ka="UserInterrupt",Tr=class{constructor(t,r,i,a,u,d,m,w){var A;this._identity=t,this._key=r,this._chain=i,this._storage=a,this.idleManager=u,this._createOptions=d,this._idpWindow=m,this._eventHandler=w;let P=this.logout.bind(this),O=d?.idleOptions;!O?.onIdle&&!O?.disableDefaultIdleCallback&&((A=this.idleManager)===null||A===void 0||A.registerCallback(()=>{P(),location.reload()}))}static async create(t={}){var r,i,a;let u=(r=t.storage)!==null&&r!==void 0?r:new Ge,d=(i=t.keyType)!==null&&i!==void 0?i:ln,m=null;if(t.identity)m=t.identity;else{let O=await u.get(Kt);if(!O&&Ar)try{let Z=new ze,it=await Z.get(jt),st=await Z.get(Kt);it&&st&&d===ln&&(console.log("Discovered an identity stored in localstorage. Migrating to IndexedDB"),await u.set(jt,it),await u.set(Kt,st),O=it,await Z.remove(jt),await Z.remove(Kt))}catch(Z){console.error("error while attempting to recover localstorage: "+Z)}if(O)try{typeof O=="object"?d===dn&&typeof O=="string"?m=await kt.fromJSON(O):m=await de.fromKeyPair(O):typeof O=="string"&&(m=kt.fromJSON(O))}catch{}}let w=new Dt,A=null;if(m)try{let O=await u.get(jt);if(typeof O=="object"&&O!==null)throw new Error("Delegation chain is incorrectly stored. A delegation chain should be stored as a string.");t.identity?w=t.identity:O&&(A=he.fromJSON(O),Ui(A)?w=$e.fromDelegation(m,A):(await hn(u),m=null))}catch(O){console.error(O),await hn(u),m=null}let P;return!((a=t.idleOptions)===null||a===void 0)&&a.disableIdle?P=void 0:(A||t.identity)&&(P=We.create(t.idleOptions)),m||(d===dn?(m=await kt.generate(),await u.set(Kt,JSON.stringify(m.toJSON()))):(t.storage&&d===ln&&console.warn(`You are using a custom storage provider that may not support CryptoKey storage. If you are using a custom storage provider that does not support CryptoKey storage, you should use '${dn}' as the key type, as it can serialize to a string`),m=await de.generate(),await u.set(Kt,m.getKeyPair()))),new this(w,m,A,u,P,t)}_handleSuccess(t,r){var i,a,u;let d=t.delegations.map(A=>({delegation:new Oe(A.delegation.pubkey,A.delegation.expiration,A.delegation.targets),signature:A.signature.buffer})),m=he.fromDelegations(d,t.userPublicKey.buffer),w=this._key;if(w){if(this._chain=m,this._identity=$e.fromDelegation(w,this._chain),(i=this._idpWindow)===null||i===void 0||i.close(),!this.idleManager){let A=(a=this._createOptions)===null||a===void 0?void 0:a.idleOptions;this.idleManager=We.create(A),!A?.onIdle&&!A?.disableDefaultIdleCallback&&((u=this.idleManager)===null||u===void 0||u.registerCallback(()=>{this.logout(),location.reload()}))}r?.(),this._removeEventListener(),delete this._idpWindow}}getIdentity(){return this._identity}async isAuthenticated(){return!this.getIdentity().getPrincipal().isAnonymous()&&this._chain!==null}async login(t){var r,i,a,u;let d=BigInt(8)*BigInt(36e11),m=new URL(((r=t?.identityProvider)===null||r===void 0?void 0:r.toString())||Fa);m.hash=ka,(i=this._idpWindow)===null||i===void 0||i.close(),this._removeEventListener(),this._eventHandler=this._getEventHandler(m,Object.assign({maxTimeToLive:(a=t?.maxTimeToLive)!==null&&a!==void 0?a:d},t)),window.addEventListener("message",this._eventHandler),this._idpWindow=(u=window.open(m.toString(),"idpWindow",t?.windowOpenerFeatures))!==null&&u!==void 0?u:void 0;let w=()=>{this._idpWindow&&(this._idpWindow.closed?this._handleFailure(Ka,t?.onError):setTimeout(w,ja))};w()}_getEventHandler(t,r){return async i=>{var a,u,d;if(i.origin!==t.origin){console.warn(`WARNING: expected origin '${t.origin}', got '${i.origin}' (ignoring)`);return}let m=i.data;switch(m.kind){case"authorize-ready":{let w={kind:"authorize-client",sessionPublicKey:new Uint8Array((a=this._key)===null||a===void 0?void 0:a.getPublicKey().toDer()),maxTimeToLive:r?.maxTimeToLive,derivationOrigin:(u=r?.derivationOrigin)===null||u===void 0?void 0:u.toString()};(d=this._idpWindow)===null||d===void 0||d.postMessage(w,t.origin);break}case"authorize-client-success":try{this._handleSuccess(m,r?.onSuccess),this._chain&&await this._storage.set(jt,JSON.stringify(this._chain.toJSON()))}catch(w){this._handleFailure(w.message,r?.onError)}break;case"authorize-client-failure":this._handleFailure(m.text,r?.onError);break;default:break}}}_handleFailure(t,r){var i;(i=this._idpWindow)===null||i===void 0||i.close(),r?.(t),this._removeEventListener(),delete this._idpWindow}_removeEventListener(){this._eventHandler&&window.removeEventListener("message",this._eventHandler),this._eventHandler=void 0}async logout(t={}){if(await hn(this._storage),this._identity=new Dt,this._chain=null,t.returnTo)try{window.history.pushState({},"",t.returnTo)}catch{window.location.href=t.returnTo}}};async function hn(e){await e.remove(Kt),await e.remove(jt),await e.remove(Yi)}var Sr=()=>Tr.create({idleOptions:{disableIdle:!0,disableDefaultIdleCallback:!0}});var pn=async({data:e})=>{try{return await Mn(e)}catch(t){console.error("The data parsing has failed, mapping to undefined as a fallback.",t);return}};var Or=({matcher:e,paginate:t,order:r,owner:i})=>({matcher:yt(e)?[]:[{key:mt(e.key),description:mt(e.description)}],paginate:mt(yt(t)?void 0:{start_after:mt(t.startAfter),limit:mt(yt(t.limit)?void 0:BigInt(t.limit))}),order:mt(yt(r)?void 0:{desc:r.desc,field:r.field==="created_at"?{CreatedAt:null}:r.field==="updated_at"?{UpdatedAt:null}:{Keys:null}}),owner:mt(yt(i)?void 0:typeof i=="string"?ot.fromText(i):i)});var qi=({IDL:e})=>{let t=e.Record({batch_id:e.Nat,headers:e.Vec(e.Tuple(e.Text,e.Text)),chunk_ids:e.Vec(e.Nat)}),r=e.Record({controllers:e.Vec(e.Principal)}),i=e.Variant({Write:e.Null,Admin:e.Null}),a=e.Record({updated_at:e.Nat64,metadata:e.Vec(e.Tuple(e.Text,e.Text)),created_at:e.Nat64,scope:i,expires_at:e.Opt(e.Nat64)}),u=e.Record({updated_at:e.Opt(e.Nat64)}),d=e.Variant({Db:e.Null,Storage:e.Null}),m=e.Record({rewrites:e.Vec(e.Tuple(e.Text,e.Text)),headers:e.Vec(e.Tuple(e.Text,e.Vec(e.Tuple(e.Text,e.Text))))}),w=e.Record({storage:m}),A=e.Record({updated_at:e.Nat64,owner:e.Principal,data:e.Vec(e.Nat8),description:e.Opt(e.Text),created_at:e.Nat64}),P=e.Record({url:e.Text,method:e.Text,body:e.Vec(e.Nat8),headers:e.Vec(e.Tuple(e.Text,e.Text))}),O=e.Record({token:e.Opt(e.Text),sha256:e.Opt(e.Vec(e.Nat8)),headers:e.Vec(e.Tuple(e.Text,e.Text)),index:e.Nat64,encoding_type:e.Text,full_path:e.Text}),Z=e.Variant({Callback:e.Record({token:O,callback:e.Func([],[],[])})}),it=e.Record({body:e.Vec(e.Nat8),headers:e.Vec(e.Tuple(e.Text,e.Text)),streaming_strategy:e.Opt(Z),status_code:e.Nat16}),st=e.Record({token:e.Opt(O),body:e.Vec(e.Nat8)}),xt=e.Record({token:e.Opt(e.Text),collection:e.Text,name:e.Text,description:e.Opt(e.Text),encoding_type:e.Opt(e.Text),full_path:e.Text}),Tt=e.Record({batch_id:e.Nat}),dt=e.Variant({UpdatedAt:e.Null,Keys:e.Null,CreatedAt:e.Null}),Bt=e.Record({field:dt,desc:e.Bool}),Mt=e.Record({key:e.Opt(e.Text),description:e.Opt(e.Text)}),Nt=e.Record({start_after:e.Opt(e.Text),limit:e.Opt(e.Nat64)}),Vt=e.Record({order:e.Opt(Bt),owner:e.Opt(e.Principal),matcher:e.Opt(Mt),paginate:e.Opt(Nt)}),Je=e.Record({token:e.Opt(e.Text),collection:e.Text,owner:e.Principal,name:e.Text,description:e.Opt(e.Text),full_path:e.Text}),Ie=e.Record({modified:e.Nat64,sha256:e.Vec(e.Nat8),total_length:e.Nat}),Xe=e.Record({key:Je,updated_at:e.Nat64,encodings:e.Vec(e.Tuple(e.Text,Ie)),headers:e.Vec(e.Tuple(e.Text,e.Text)),created_at:e.Nat64}),Ue=e.Record({matches_pages:e.Opt(e.Nat64),matches_length:e.Nat64,items_page:e.Opt(e.Nat64),items:e.Vec(e.Tuple(e.Text,Xe)),items_length:e.Nat64}),xe=e.Record({updated_at:e.Nat64,created_at:e.Nat64,bn_id:e.Opt(e.Text)}),Re=e.Record({matches_pages:e.Opt(e.Nat64),matches_length:e.Nat64,items_page:e.Opt(e.Nat64),items:e.Vec(e.Tuple(e.Text,A)),items_length:e.Nat64}),ne=e.Variant({Controllers:e.Null,Private:e.Null,Public:e.Null,Managed:e.Null}),Be=e.Record({updated_at:e.Nat64,max_size:e.Opt(e.Nat),read:ne,created_at:e.Nat64,write:ne}),Ne=e.Record({metadata:e.Vec(e.Tuple(e.Text,e.Text)),scope:i,expires_at:e.Opt(e.Nat64)}),Pt=e.Record({controller:Ne,controllers:e.Vec(e.Principal)}),Pe=e.Record({updated_at:e.Opt(e.Nat64),data:e.Vec(e.Nat8),description:e.Opt(e.Text)}),ee=e.Record({updated_at:e.Opt(e.Nat64),max_size:e.Opt(e.Nat),read:ne,write:ne}),re=e.Record({content:e.Vec(e.Nat8),batch_id:e.Nat,order_id:e.Opt(e.Nat)}),Ze=e.Record({chunk_id:e.Nat});return e.Service({commit_asset_upload:e.Func([t],[],[]),del_asset:e.Func([e.Text,e.Text],[],[]),del_assets:e.Func([e.Text],[],[]),del_controllers:e.Func([r],[e.Vec(e.Tuple(e.Principal,a))],[]),del_custom_domain:e.Func([e.Text],[],[]),del_doc:e.Func([e.Text,e.Text,u],[],[]),del_rule:e.Func([d,e.Text,u],[],[]),get_config:e.Func([],[w],[]),get_doc:e.Func([e.Text,e.Text],[e.Opt(A)],["query"]),http_request:e.Func([P],[it],["query"]),http_request_streaming_callback:e.Func([O],[st],["query"]),init_asset_upload:e.Func([xt],[Tt],[]),list_assets:e.Func([e.Text,Vt],[Ue],["query"]),list_controllers:e.Func([],[e.Vec(e.Tuple(e.Principal,a))],["query"]),list_custom_domains:e.Func([],[e.Vec(e.Tuple(e.Text,xe))],["query"]),list_docs:e.Func([e.Text,Vt],[Re],["query"]),list_rules:e.Func([d],[e.Vec(e.Tuple(e.Text,Be))],["query"]),set_config:e.Func([w],[],[]),set_controllers:e.Func([Pt],[e.Vec(e.Tuple(e.Principal,a))],[]),set_custom_domain:e.Func([e.Text,e.Opt(e.Text)],[],[]),set_doc:e.Func([e.Text,e.Text,Pe],[A],[]),set_rule:e.Func([d,e.Text,ee],[],[]),upload_asset_chunk:e.Func([re],[Ze],[]),version:e.Func([],[e.Text],["query"])})};var Hi=async({satelliteId:e,idlFactory:t,identity:r,fetch:i,env:a="prod"})=>{let u=a==="dev"||bt.getInstance().localIdentity(),d=u?"http://127.0.0.1:8000/":"https://icp0.io",m=new ue({identity:r,...d&&{host:d},...i&&{fetch:i}});return u&&await m.fetchRootKey(),Lt.createActor(t,{agent:m,canisterId:e})};var zt=async({satelliteId:e,...t})=>{let{satelliteId:r}=e!==void 0?{satelliteId:e}:bt.getInstance().get()??{satelliteId:void 0};if(!r)throw new Error("No satellite principal defined.");return Hi({satelliteId:r,idlFactory:qi,...t})};var $i=async({collection:e,key:t,satellite:r})=>{let i=await zt(r),a=At(await i.get_doc(e,t));if(yt(a))return;let{data:u,owner:d,description:m,...w}=a,A=await pn({data:u});return{key:t,description:At(m),owner:d.toText(),data:A,...w}},Wi=async({collection:e,doc:t,satellite:r})=>{let i=await zt(r),{key:a,data:u,updated_at:d,description:m}=t,w=await i.set_doc(e,a,{description:mt(m),data:await Kn(u),updated_at:mt(d)}),{owner:A,updated_at:P,created_at:O,description:Z}=w;return{key:a,description:At(Z),owner:A.toText(),data:u,created_at:O,updated_at:P}},zi=async({collection:e,doc:t,satellite:r})=>{let i=await zt(r),{key:a,updated_at:u}=t;return i.del_doc(e,a,{updated_at:mt(u)})},Gi=async({collection:e,filter:t,satellite:r})=>{let i=await zt(r),{items:a,items_page:u,items_length:d,matches_length:m,matches_pages:w}=await i.list_docs(e,Or(t)),A=[];for(let[P,O]of a){let{data:Z,owner:it,description:st,...xt}=O;A.push({key:P,description:At(st),owner:it.toText(),data:await pn({data:Z}),...xt})}return{items:A,items_length:d,items_page:At(u),matches_length:m,matches_pages:At(w)}};var Gt=e=>e!==void 0?e:Ur()??new Dt;var Ji=async({satellite:e,...t})=>{let r=Gt(e?.identity);return $i({...t,satellite:{...e,identity:r}})},Ii=async({satellite:e,...t})=>{let r=Gt(e?.identity);return Wi({...t,satellite:{...e,identity:r}})},Fc=async({satellite:e,...t})=>{let r=Gt(e?.identity);return zi({...t,satellite:{...e,identity:r}})},kc=async({satellite:e,filter:t,...r})=>{let i=Gt(e?.identity);return Gi({...r,filter:t??{},satellite:{...e,identity:i}})};var Xi=async e=>{let t=Ur();if(yt(t))throw new Error("No identity to initialize the user. Have you initialized Juno?");let r=t.getPrincipal().toText(),i=await Ji({collection:"#user",key:r});return yt(i)?await Ma({userId:r,provider:e}):i},Ma=async({userId:e,...t})=>Ii({collection:"#user",doc:{key:e,data:t}});var Jt,xn=async e=>{if(Jt=Jt??await Sr(),!(await Jt?.isAuthenticated()??!1))return;let r=await Xi(e);Yt.getInstance().set(r)},Va=async e=>new Promise(async(t,r)=>{Jt=Jt??await Sr();let i=e?.provider??new ur({});await Jt.login({onSuccess:async()=>{await xn(i.id),t()},onError:a=>r(a),maxTimeToLive:e?.maxTimeToLive??Yn,...e?.derivationOrigin!==void 0&&{derivationOrigin:e.derivationOrigin},...i.signInOptions({windowed:e?.windowed})})}),yn=async()=>{await Jt?.logout(),Jt=void 0,Yt.getInstance().reset()},Ur=()=>Jt?.getIdentity(),Ya=async()=>(Jt??await Sr()).getIdentity();var Zi=e=>{let t=e===!0?"./workers/auth.worker.js":e,r=new Worker(t),i=async()=>{Vn({message:"junoSignOutAuthTimer"}),await yn()};return r.onmessage=async({data:a})=>{let{msg:u}=a;switch(u){case"junoSignOutAuthTimer":await i();return}},Yt.getInstance().subscribe(a=>{if(yt(a)){r.postMessage({msg:"junoStopAuthTimer"});return}r.postMessage({msg:"junoStartAuthTimer"})})};var Qi=async({data:e,filename:t,collection:r,headers:i,token:a,fullPath:u,encoding:d,description:m,satellite:w})=>{let A=await zt(w),{batch_id:P}=await A.init_asset_upload({collection:r,full_path:u,name:t,token:mt(a),encoding_type:mt(d),description:mt(m)}),O=19e5,Z=[],it=cr()?new Blob([await e.arrayBuffer()]):e,st=0n;for(let dt=0;dt<it.size;dt+=O){let Bt=it.slice(dt,dt+O);Z.push({batchId:P,chunk:Bt,actor:A,orderId:st}),st++}let xt=[];for await(let dt of qa({uploadChunks:Z}))xt=[...xt,...dt];let Tt=i.find(([dt,Bt])=>dt.toLowerCase()==="content-type")===void 0&&e.type!==void 0&&e.type!==""?[["Content-Type",e.type]]:void 0;await A.commit_asset_upload({batch_id:P,chunk_ids:xt.map(({chunk_id:dt})=>dt),headers:[...i,...Tt||[]]})};async function*qa({uploadChunks:e,limit:t=12}){for(let r=0;r<e.length;r=r+t){let i=e.slice(r,r+t);yield await Promise.all(i.map(u=>Ha(u)))}}var Ha=async({batchId:e,chunk:t,actor:r,orderId:i})=>r.upload_asset_chunk({batch_id:e,content:new Uint8Array(await t.arrayBuffer()),order_id:mt(i)}),Di=async({collection:e,satellite:t,filter:r})=>{let i=await zt(t),{items:a,items_length:u,items_page:d,matches_length:m,matches_pages:w}=await i.list_assets(e,Or(r));return{items:a.map(([A,P])=>P),items_length:u,items_page:At(d),matches_length:m,matches_pages:At(w)}},Li=async({collection:e,fullPath:t,satellite:r})=>(await zt(r)).del_asset(e,t),to=async({collection:e,satellite:t})=>(await zt(t)).del_assets(e);var eo=e=>btoa([...e].map(t=>String.fromCharCode(t)).join(""));var mn=e=>encodeURI(e.toLowerCase().replace(/\s/g,"-"));var l0=async e=>ro(e),d0=async e=>ro({filename:e.data.name,...e}),ro=async({filename:e,data:t,collection:r,headers:i=[],fullPath:a,token:u,satellite:d,encoding:m,description:w})=>{let A=Gt(d?.identity),P=mn(e),O=a||`/${r}/${P}`;return await Qi({data:t,filename:mn(P),collection:r,token:u,headers:i,fullPath:O,encoding:m,satellite:{...d,identity:A},description:w}),{downloadUrl:`${Yr()}${O}${u!==void 0?`?token=${u}`:""}`,fullPath:O,name:P}},h0=async({collection:e,satellite:t,filter:r})=>{let{items:i,...a}=await Di({collection:e,satellite:{...t,identity:Gt(t?.identity)},filter:r??{}}),u=Yr();return{assets:i.map(({key:{full_path:d,token:m,name:w,owner:A,description:P},headers:O,encodings:Z,created_at:it,updated_at:st})=>{let xt=At(m);return{fullPath:d,description:At(P),name:w,downloadUrl:`${u}${d}${xt!==void 0?`?token=${xt}`:""}`,token:xt,headers:O,encodings:Z.reduce((Tt,[dt,{modified:Bt,sha256:Mt,total_length:Nt}])=>({...Tt,[dt]:{modified:Bt,sha256:eo(Mt),total_length:Nt}}),{}),owner:A.toText(),created_at:it,updated_at:st}}),...a}},p0=async({collection:e,fullPath:t,satellite:r})=>Li({collection:e,fullPath:t,satellite:{...r,identity:Gt(r?.identity)}}),x0=async({collection:e,satellite:t})=>to({collection:e,satellite:{...t,identity:Gt(t?.identity)}});var b0=async e=>{bt.getInstance().set(e),await xn();let t=e.workers?.auth!==void 0?Zi(e.workers.auth):void 0;return[...t?[t]:[]]},v0=e=>Yt.getInstance().subscribe(e);export{ur as InternetIdentityProvider,Wn as NFIDProvider,v0 as authSubscribe,p0 as deleteAsset,x0 as deleteAssets,Fc as deleteDoc,Ji as getDoc,b0 as initJuno,h0 as listAssets,kc as listDocs,Ii as setDoc,Va as signIn,yn as signOut,Ya as unsafeIdentity,l0 as uploadBlob,d0 as uploadFile};
/*! Bundled license information:

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)
*/
//# sourceMappingURL=index.js.map
